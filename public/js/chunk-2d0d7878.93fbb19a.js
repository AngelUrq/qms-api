(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7878"],{"76cf":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{staticClass:"pt-5 mb-5 white--text",attrs:{color:"light-blue darken-4"}},[a("h4",{staticClass:"text-center pb-5"},[e._v("ACCIONES PARA ELIMINAR LA CAUSA RAÍZ")])]),a("v-row",[e._l(e.actionsHeaders,(function(t,s){return a("v-col",{key:s},[a("h4",[e._v(e._s(t))])])})),a("div",{staticClass:"mr-5 mt-3"},[a("b",[e._v("Opciones")])])],2),e._l(e.actionsData,(function(t,s){return a("v-row",{key:s},[a("v-col",[a("v-textarea",{staticClass:"mt-3",attrs:{"auto-grow":"",rows:"1",color:"blue darken-3",label:"Actividad",outlined:"",readonly:!e.isAdminOrGeneralResponsable()},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"activity.name"}})],1),a("v-col",[a("v-combobox",{attrs:{color:"blue darken-3","item-color":"blue",items:e.items,label:"Responsable",autocomplete:!1,dense:"",readonly:!e.isAdminOrGeneralResponsable()},model:{value:t.responsable,callback:function(a){e.$set(t,"responsable",a)},expression:"activity.responsable"}})],1),a("v-col",[a("v-textarea",{staticClass:"mt-3",attrs:{"auto-grow":"",rows:"1",color:"blue darken-3",label:"Descripcion",outlined:"",readonly:!e.verifyAuthorizedUser(t.responsable)},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"activity.description"}})],1),a("v-col",[a("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"",color:"light-blue darken-4","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(s){var i=s.on;return[a("v-text-field",e._g({attrs:{placeholder:"YY/mm/dd","prepend-icon":"mdi-calendar",color:"light-blue darken-4"},model:{value:t.proposedDate,callback:function(a){e.$set(t,"proposedDate",a)},expression:"activity.proposedDate"}},i))]}}],null,!0)},[a("v-date-picker",{attrs:{color:"light-blue darken-4",locale:"es-419",min:"2017/01","no-title":"",disabled:!e.verifyAuthorizedUser(t.responsable)},model:{value:t.proposedDate,callback:function(a){e.$set(t,"proposedDate",a)},expression:"activity.proposedDate"}})],1)],1),a("v-col",[a("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"",color:"light-blue darken-4","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(s){var i=s.on;return[a("v-text-field",e._g({attrs:{color:"light-blue darken-4",placeholder:"YY/mm/dd","prepend-icon":"mdi-calendar"},model:{value:t.realDate,callback:function(a){e.$set(t,"realDate",a)},expression:"activity.realDate"}},i))]}}],null,!0)},[a("v-date-picker",{attrs:{color:"light-blue darken-4",locale:"es-419",min:"2017/01","no-title":"",disabled:!e.verifyAuthorizedUser(t.responsable)},model:{value:t.realDate,callback:function(a){e.$set(t,"realDate",a)},expression:"activity.realDate"}})],1)],1),e.verifyLastRow(s,e.actionsData.length)?a("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{color:"light-blue darken-2",disabled:!e.isAdminOrGeneralResponsable(),fab:"",small:""},on:{click:e.addActivity}},[a("v-icon",{attrs:{dark:""}},[e._v("mdi-plus")])],1):a("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{color:"light-blue darken-2",disabled:!e.isAdminOrGeneralResponsable(),fab:"",small:""},on:{click:function(t){return e.removeActivity(s)}}},[a("v-icon",{attrs:{dark:""}},[e._v("mdi-minus")])],1),a("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{color:"light-blue darken-2",fab:"",small:"",disabled:!e.verifyAuthorizedUser(t.responsable)},on:{click:function(a){return e.getAttachmentRoute(t)}}},[a("v-icon",{attrs:{dark:""}},[e._v("mdi-paperclip")])],1)],1)}))],2)},i=[],r=a("d3b8"),n=a("bc3a"),o=a.n(n),l=a("f601"),c=a("b1b8"),d=a("bade"),u={props:{actionsData:{type:Array,default:function(){return[]}},actualUser:{type:Object,default:function(){return{}}},responsible:{type:Array,default:function(){return[]}}},data(){return{actionsHeaders:["Actividad","Responsable","Descripción","Fecha propuesta","Fecha real"],verifyLastRow:r["a"],users:[],items:[],actionPlanID:"",attachmentRoute:""}},mounted(){this.getUsers(),this.checkActionsData(),this.actionPlanID=this.$route.query.id},methods:{addActivity(){let e={id:Object(c["a"])(),name:"",responsable:"",description:"",proposedDate:"",realDate:"",eventCreated:!1};this.actionsData.push(e)},removeActivity(e){this.actionsData.splice(e,1)},getUsers(){let e={headers:{"x-access-token":this.$store.state.token}};o.a.get(l["b"]+"/api/users",e).then(e=>{this.users=e.data}).catch(e=>{console.log(e)}).then(()=>{this.formatUsers()})},formatUsers(){this.users.forEach(e=>{let t=this.getNameWithFormat(e.firstNames,e.paternalLastName,e.maternalLastName);this.items.push({text:t,value:e._id})})},getNameWithFormat(e,t,a){return e+" "+t+" "+a},checkActionsData(){this.actionsData.length<1&&this.addActivity()},isAdminOrGeneralResponsable(){return Object(d["a"])(this.actualUser)||Object(d["b"])(this.responsible,this.actualUser)},verifyAuthorizedUser(e){return this.isAdminOrGeneralResponsable()||e.value===this.actualUser._id},getAttachmentRoute(e){Object(c["b"])(e)?(this.attachmentRoute="/attachments?userID="+this.actualUser.value+"&actionPlanID="+this.actionPlanID+"&activityID="+e.id,this.$emit("save-action-plan"),this.$router.push(this.attachmentRoute)):this.attachmentRoute=""}}},p=u,h=a("2877"),m=a("6544"),b=a.n(m),v=a("8336"),f=a("b0af"),k=a("62ad"),y=a("2b5d"),A=a("a523"),D=a("2e4b"),x=a("132d"),g=a("e449"),w=a("0fd9"),R=a("8654"),_=a("a844"),C=Object(h["a"])(p,s,i,!1,null,null,null);t["default"]=C.exports;b()(C,{VBtn:v["a"],VCard:f["a"],VCol:k["a"],VCombobox:y["a"],VContainer:A["a"],VDatePicker:D["a"],VIcon:x["a"],VMenu:g["a"],VRow:w["a"],VTextField:R["a"],VTextarea:_["a"]})}}]);
//# sourceMappingURL=chunk-2d0d7878.93fbb19a.js.map