(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f762"],{b471:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-dialog",{attrs:{"max-width":"600"},scopedSlots:e._u([{key:"activator",fn:function(a){var s=a.on;return[t("v-btn",e._g({attrs:{color:"indigo darken-4","x-small":"",outlined:""}},s),[e._v("\n    Recordar\n    ")])]}}]),model:{value:e.dialogChangePass,callback:function(a){e.dialogChangePass=a},expression:"dialogChangePass"}},[t("v-card",[t("v-card-title",{staticClass:"indigo darken-4 lighten-1 white--text text--lighten-1",attrs:{"primary-title":""}},[e._v("\n      Recuperar Contraseña\n    ")]),t("v-card-text",[t("v-form",{ref:"form"},[t("v-card-text",{staticClass:"text--primary"},[e._v("Se enviara un correo con su codigo de verificacion")]),t("v-container",[t("v-text-field",{attrs:{color:"amber accent-4",rules:e.emailRules,label:"Correo*",required:""},model:{value:e.user.email,callback:function(a){e.$set(e.user,"email",a)},expression:"user.email"}})],1)],1)],1),t("v-card-actions",[t("v-alert",{attrs:{value:e.warningAlert,type:"warning",dense:""}},[e._v("\n        El correo es invalido\n      ")]),t("v-alert",{attrs:{value:e.successAlert,type:"success",height:"50"}},[e._v("\n        Se envio el correo!\n      ")]),t("div",{staticClass:"flex-grow-1"}),t("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"indigo darken-4 lighten-1",text:""},on:{click:function(a){return a.stopPropagation(),e.send(a)}}},[e._v("Enviar\n      ")]),t("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"indigo darken-4 lighten-1",text:""},on:{click:function(a){e.dialogChangePass=!1,e.clearFields()}}},[e._v("Cancelar\n      ")])],1)],1),t("v-dialog",{attrs:{"max-width":"600"},model:{value:e.dialogConfirmCode,callback:function(a){e.dialogConfirmCode=a},expression:"dialogConfirmCode"}},[t("v-card",[t("v-card-title",{staticClass:"indigo darken-4 lighten-1 white--text text--lighten-1",attrs:{"primary-title":""}},[e._v("\n        Codigo de Verificacion\n        ")]),t("v-card-text",[t("v-form",{ref:"form2"},[t("v-card-text",{staticClass:"text--primary"},[e._v("Ingrese su codigo de verificacion")]),t("v-container",[t("v-text-field",{attrs:{color:"amber accent-4",label:"Codigo",required:""},model:{value:e.verificationCode,callback:function(a){e.verificationCode=a},expression:"verificationCode"}})],1)],1)],1),t("v-card-actions",[t("v-alert",{attrs:{value:e.warningAlert2,type:"warning",dense:""}},[e._v("\n        El codigo no es correcto\n      ")]),t("v-alert",{attrs:{value:e.successAlert2,type:"success",height:"50"}},[e._v("\n        Codigo correcto!\n      ")]),t("div",{staticClass:"flex-grow-1"}),t("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"indigo darken-4 lighten-1",text:""},on:{click:e.verifyCode}},[e._v("Verificar\n      ")]),t("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"indigo darken-4 lighten-1",text:""},on:{click:function(a){e.dialogConfirmCode=!1,e.clearFields()}}},[e._v("Cancelar\n      ")])],1)],1)],1),t("v-dialog",{attrs:{"max-width":"600"},model:{value:e.dialogUpdatePass,callback:function(a){e.dialogUpdatePass=a},expression:"dialogUpdatePass"}},[t("v-card",[t("v-card-title",{staticClass:"indigo darken-4 lighten-1 white--text text--lighten-1",attrs:{"primary-title":""}},[e._v("\n        Cambiar Contraseña\n        ")]),t("v-card-text",[t("v-form",{ref:"form2"},[t("v-card-text",{staticClass:"text--primary"},[e._v("Ingrese su nueva contraseña")]),t("v-container",[t("v-text-field",{attrs:{color:"amber accent-4",rules:e.passwordRules,label:"Nueva Contraseña",required:""},model:{value:e.newPass,callback:function(a){e.newPass=a},expression:"newPass"}}),t("v-text-field",{attrs:{color:"amber accent-4",label:"Confrimar Contraseña",required:""},model:{value:e.confirmPass,callback:function(a){e.confirmPass=a},expression:"confirmPass"}})],1)],1)],1),t("v-card-actions",[t("v-alert",{attrs:{value:e.warningAlert3_samePass,type:"warning",dense:""}},[e._v("\n        La contraseña no coincide\n      ")]),t("v-alert",{attrs:{value:e.warningAlert3_passRules,type:"warning",dense:""}},[e._v("\n        La contraseña no es valida\n      ")]),t("v-alert",{attrs:{value:e.successAlert3,type:"success",height:"50"}},[e._v("\n        Se actualizo la contraseña\n      ")]),t("div",{staticClass:"flex-grow-1"}),t("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"indigo darken-4 lighten-1",disabled:e.isDisabled,text:""},on:{click:e.updatePassword}},[e._v("Actualizar\n      ")]),t("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"indigo darken-4 lighten-1",text:""},on:{click:function(a){e.dialogUpdatePass=!1}}},[e._v("Regresar\n      ")])],1)],1)],1)],1)},i=[],r=t("bc3a"),n=t.n(r),o=t("f601"),l={data(){return{dialogChangePass:"",dialogConfirmCode:"",dialogUpdatePass:"",xsdaCodeGenerated:"",newPass:"",confirmPass:"",warningAlert:!1,warningAlert2:!1,warningAlert3_samePass:!1,warningAlert3_passRules:!1,successAlert:!1,successAlert2:!1,successAlert3:!1,isDisabled:!1,emailRules:[e=>!!e||"Correo es necesario",e=>/.+@.+\..+/.test(e)||"Correo debe ser valido"],passwordRules:[e=>!!e||"Contraseña es necesario",e=>e.length>=5||"Contraseña debe ser mas de 5 caracteres"],user:{email:""},verificationCode:""}},methods:{sendMailVerification(){this.xsdaCodeGenerated=this.generateCode(10);const e=`\n        <p>Hola!</p>\n        <p>Estas en proceso de cambiar tu contraseña</p>\n        <h3>Codigo de Verificacion</h3>\n        <ul>\n          <li> Tu codigo es: ${this.xsdaCodeGenerated}\n        </ul>\n        <p>Ingresa tu codigo para seguir con tu cambio de contraseña</p>\n      `;let a={from:'"Gestion de Calidad UPB" <UPBgestiondecalidad@gmail.com>',to:this.user.email,subject:"UPB Gestion de Calidad: Recuperar Contraseña",text:"",html:e};n.a.post(o["b"]+"/api/mail/send",a).then(e=>{console.log(e)}).catch(e=>{console.log(e)})},generateCode(e){let a="",t="abcdefghijklmnopqrstuvwxyz123456789ABCDEFGH";for(let s=0;s<e;s++)a+=t.charAt(Math.floor(Math.random()*t.length));return a},clearFields(){this.$refs.form.resetValidation()},send(){this.$refs.form.validate()?(this.sendMailVerification(),this.clearFields(),this.successAlert=!0,this.dialogConfirmCode=!0,this.dialogChangePass=!1,setTimeout(()=>{this.successAlert=!1},1e4)):(this.warningAlert=!0,setTimeout(()=>{this.warningAlert=!1},1e4))},verifyCode(){this.verificationCode===this.xsdaCodeGenerated?(this.warningAlert2=!1,this.successAlert2=!0,this.xsdaCodeGenerated="",this.dialogUpdatePass=!0,this.dialogConfirmCode=!1,setTimeout(()=>{this.successAlert2=!1},1e4)):(this.successAlert2=!1,this.warningAlert2=!0,setTimeout(()=>{this.warningAlert2=!1},1e4))},updatePassword(){this.$refs.form2.validate()?this.newPass===this.confirmPass?(this.warningAlert3_samePass=!1,this.warningAlert3_passRules=!1,n.a.put(o["b"]+"/api/password-reset/"+this.user.email,{password:this.confirmPass}).then(e=>{console.log(e)}).catch(e=>{console.log(e)}),this.$refs.form2.resetValidation(),this.warningAlert3_passRules=!1,this.warningAlert3_samePass=!1,this.successAlert3=!0,this.isDisabled=!0,setTimeout(()=>{this.successAlert3=!1},1e4),this.user.email="",this.newPass="",this.confirmPass=""):(this.successAlert3=!1,this.warningAlert3_passRules=!1,this.warningAlert3_samePass=!0,setTimeout(()=>{this.warningAlert3_samePass=!1},1e4)):(this.successAlert3=!1,this.warningAlert3_samePass=!1,this.warningAlert3_passRules=!0,setTimeout(()=>{this.warningAlert3_passRules=!1},1e4))}}},c=l,d=t("2877"),u=t("6544"),g=t.n(u),v=t("0798"),h=t("8336"),m=t("b0af"),f=t("99d9"),C=t("a523"),p=t("169a"),w=t("4bd4"),b=t("8654"),x=Object(d["a"])(c,s,i,!1,null,null,null);a["default"]=x.exports;g()(x,{VAlert:v["a"],VBtn:h["a"],VCard:m["a"],VCardActions:f["a"],VCardText:f["b"],VCardTitle:f["c"],VContainer:C["a"],VDialog:p["a"],VForm:w["a"],VTextField:b["a"]})}}]);
//# sourceMappingURL=chunk-2d20f762.3ca23638.js.map