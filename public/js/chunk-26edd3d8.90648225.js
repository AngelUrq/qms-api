(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26edd3d8"],{"0094":function(t,e,s){t.exports=s.p+"img/logoUPB.5085ae23.jpg"},"02f0":function(t,e,s){},2102:function(t,e,s){},"2db4":function(t,e,s){"use strict";s("ca71");var a=s("a9ad"),i=s("f2e7"),n=s("fe6c"),r=s("58df"),o=s("d9bd");e["a"]=Object(r["a"])(a["a"],i["a"],Object(n["b"])(["absolute","top","bottom","left","right"])).extend({name:"v-snackbar",props:{multiLine:Boolean,timeout:{type:Number,default:6e3},vertical:Boolean},data:()=>({activeTimeout:-1}),computed:{classes(){return{"v-snack--active":this.isActive,"v-snack--absolute":this.absolute,"v-snack--bottom":this.bottom||!this.top,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--top":this.top,"v-snack--vertical":this.vertical}}},watch:{isActive(){this.setTimeout()}},created(){this.$attrs.hasOwnProperty("auto-height")&&Object(o["d"])("auto-height",this)},mounted(){this.setTimeout()},methods:{setTimeout(){window.clearTimeout(this.activeTimeout),this.isActive&&this.timeout&&(this.activeTimeout=window.setTimeout(()=>{this.isActive=!1},this.timeout))}},render(t){return t("transition",{attrs:{name:"v-snack-transition"}},[this.isActive&&t("div",{staticClass:"v-snack",class:this.classes,on:this.$listeners},[t("div",this.setBackgroundColor(this.color,{staticClass:"v-snack__wrapper"}),[t("div",{staticClass:"v-snack__content"},this.$slots.default)])])])}})},"62ad":function(t,e,s){"use strict";s("4b85");var a=s("2b0e"),i=s("d9f7"),n=s("80d2");const r=["sm","md","lg","xl"],o=(()=>{return r.reduce((t,e)=>{return t[e]={type:[Boolean,String,Number],default:!1},t},{})})(),l=(()=>{return r.reduce((t,e)=>{return t["offset"+Object(n["C"])(e)]={type:[String,Number],default:null},t},{})})(),c=(()=>{return r.reduce((t,e)=>{return t["order"+Object(n["C"])(e)]={type:[String,Number],default:null},t},{})})(),h={col:Object.keys(o),offset:Object.keys(l),order:Object.keys(c)};function u(t,e,s){let a=t;if(null!=s&&!1!==s){if(e){const s=e.replace(t,"");a+=`-${s}`}return"col"!==t||""!==s&&!0!==s?(a+=`-${s}`,a.toLowerCase()):a.toLowerCase()}}const d=new Map;e["a"]=a["a"].extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...o,offset:{type:[String,Number],default:null},...l,order:{type:[String,Number],default:null},...c,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:s,children:a,parent:n}){let r="";for(const i in e)r+=String(e[i]);let o=d.get(r);if(!o){let t;for(t in o=[],h)h[t].forEach(s=>{const a=e[s],i=u(t,s,a);i&&o.push(i)});const s=o.some(t=>t.startsWith("col-"));o.push({col:!s||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),d.set(r,o)}return t(e.tag,Object(i["a"])(s,{class:o}),a)}})},"9e4b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-12"},[a("v-snackbar",{attrs:{timeout:t.timeout},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    "+t._s(t.textMessage)+"\n    "),a("v-btn",{attrs:{color:"green",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1),a("v-card",{staticClass:"pa-7"},[a("header",[a("v-row",{staticClass:"mb-5"},[a("v-col",{attrs:{cols:"4"}},[a("img",{attrs:{src:s("0094"),alt:"Logo UPB",width:"90"}})]),a("v-col",{attrs:{cols:"4"}},[a("h3",{staticClass:"text-center"},[t._v("FORMULARIO DE PLAN DE ACCIÓN")])])],1)],1),a("form",t._l(t.structure.rows,(function(e,s){return a("v-row",{key:s,attrs:{"no-gutters":""}},t._l(e,(function(s,i){return a("v-col",{key:i,attrs:{cols:"12",sm:"12",md:t.getWidthColumns(e.length)}},["horizontal"===s.fieldType||"vertical"===s.fieldType?a("v-textarea",{staticClass:"mr-3",attrs:{"auto-grow":"",rows:"2",color:"blue darken-3",label:s.name,outlined:"",readonly:!t.isUserAuthorized},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"column.value"}}):t._e(),"title"===s.fieldType?a("h4",{staticClass:"text-center pb-5",attrs:{readonly:!t.isUserAuthorized}},[t._v(t._s(s.name))]):t._e(),"responsible"===s.fieldType?a("div",[a("ReponsibleTable",{attrs:{responsibleData:s.value,actualUser:t.user},on:{"update-responsible-list":t.updateResponsibleList}})],1):t._e(),"corrections"===s.fieldType?a("div",[a("CorrectionTable",{attrs:{correctionsData:s.value,actualUser:t.user,responsible:t.responsible},on:{"save-action-plan":t.saveActionPlan}})],1):t._e(),"actions"===s.fieldType?a("div",[a("ActionsTable",{attrs:{actionsData:s.value,actualUser:t.user,responsible:t.responsible},on:{"save-action-plan":t.saveActionPlan}})],1):t._e()],1)})),1)})),1)]),a("v-card-actions",{staticClass:"mt-5 d-flex flex-row-reverse"},[a("v-btn",{staticClass:"white--text",attrs:{"x-large":"",color:"light-blue darken-3",width:"20%"},on:{click:t.activateProgressCircular}},[t._v("\n      "+t._s(t.text)+"\n      "),t.activateLoading?a("v-progress-circular",{attrs:{indeterminate:"",color:"white"}}):t._e()],1),a("v-btn",{staticClass:"white--text mr-5",attrs:{"x-large":"",color:"light-green darken-3",width:"20%"}},[t._v("FINALIZAR")]),a("v-btn",{staticClass:"white--text mr-5",attrs:{"x-large":"",color:"pink darken-3",width:"20%"},on:{click:function(e){return t.createEvent()}}},[t._v("Google calendar")])],1)],1)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-card",{staticClass:"pt-5 mb-5 white--text",attrs:{color:"light-blue darken-4"}},[s("h4",{staticClass:"text-center pb-5"},[t._v("RESPONSABLE DE SEGUIMIENTO")])]),s("v-row",t._l(t.responsibleHeaders,(function(e,a){return s("v-col",{key:a},[s("h4",[t._v(t._s(e.name))])])})),1),t._l(t.responsibleData,(function(e,a){return s("v-row",{key:a},[s("v-col",[s("v-col",[s("v-combobox",{attrs:{color:"blue darken-3","item-color":"blue",items:t.items,label:"Responsable",autocomplete:!1,dense:"",readonly:"Admin"!==t.actualUser.role},on:{click:function(e){return t.$emit("update-responsible-list")}},model:{value:e.name,callback:function(s){t.$set(e,"name",s)},expression:"res.name"}})],1)],1),s("v-col",[s("v-text-field",{attrs:{color:"blue darken-3",label:"Puesto","single-line":"",outlined:"",readonly:""},model:{value:e.position,callback:function(s){t.$set(e,"position",s)},expression:"res.position"}})],1),s("v-col",[s("v-text-field",{attrs:{color:"blue darken-3",placeholder:"Firma",readonly:"","single-line":"",outlined:""},model:{value:e.sign,callback:function(s){t.$set(e,"sign",s)},expression:"res.sign"}})],1),t.verifyLastRow(a,t.responsibleData.length)?s("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{fab:"",small:"",color:"light-blue darken-2",disabled:"Admin"!==t.actualUser.role},on:{click:t.addResponsible}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-plus")])],1):s("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{fab:"",small:"",color:"light-blue darken-2",disabled:"Admin"!==t.actualUser.role},on:{click:function(e){return t.removeResponsible(a)}}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-minus")])],1)],1)}))],2)},r=[];function o(t,e){let s=t+1===e;return s}var l=s("bc3a"),c=s.n(l),h=s("f601"),u={props:{responsibleData:{type:Array,default:function(){return[]}},actualUser:{type:Object,default:function(){return{}}}},mounted(){this.getUsers(),this.checkResponsibleData()},data(){return{responsibleHeaders:[{name:"Nombre"},{name:"Puesto"},{name:"Firma"}],verifyLastRow:o,users:[],items:[]}},methods:{getUsers(){let t={headers:{"x-access-token":this.$store.state.token}};c.a.get(h["b"]+"/api/users",t).then(t=>{this.users=t.data}).catch(t=>{console.log(t)}).then(()=>{this.formatUsers()})},formatUsers(){this.users.forEach(t=>{let e=this.getNameWithFormat(t.firstNames,t.paternalLastName,t.maternalLastName);"  "!==e&&this.items.push({text:e,value:t._id})})},getNameWithFormat(t,e,s){return t+" "+e+" "+s},checkResponsibleData(){this.responsibleData.length<1&&this.addResponsible()},addResponsible(){let t={name:"",position:"",sign:""};this.responsibleData.push(t)},removeResponsible(t){this.responsibleData.splice(t,1)}}},d=u,p=s("2877"),m=s("6544"),v=s.n(m),b=s("8336"),f=s("b0af"),g=s("62ad"),y=s("2b5d"),k=s("a523"),D=s("132d"),x=s("0fd9"),$=s("8654"),w=Object(p["a"])(d,n,r,!1,null,null,null),C=w.exports;v()(w,{VBtn:b["a"],VCard:f["a"],VCol:g["a"],VCombobox:y["a"],VContainer:k["a"],VIcon:D["a"],VRow:x["a"],VTextField:$["a"]});var T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-card",{staticClass:"pt-5 mb-5 white--text",attrs:{color:"light-blue darken-4"}},[s("h4",{staticClass:"text-center pb-5"},[t._v("CORRECCIÓN INMEDIATA")])]),s("v-row",[t._l(t.correctionHeaders,(function(e,a){return s("v-col",{key:a},[s("h4",[t._v(t._s(e))])])})),s("div",{staticClass:"mr-5 mt-3"},[s("b",[t._v("Opciones")])])],2),t._l(t.correctionsData,(function(e,a){return s("v-row",{key:a},[s("v-col",[s("v-textarea",{staticClass:"mt-3",attrs:{"auto-grow":"",rows:"1",color:"blue darken-3",label:"Actividad",outlined:"","single-line":"",readonly:!t.isAdminOrGeneralResponsable()},model:{value:e.name,callback:function(s){t.$set(e,"name",s)},expression:"activity.name"}})],1),s("v-col",[s("v-col",[s("v-combobox",{attrs:{color:"blue darken-3","item-color":"blue",items:t.items,label:"Responsable",autocomplete:!1,dense:"",readonly:!t.isAdminOrGeneralResponsable()},model:{value:e.responsable,callback:function(s){t.$set(e,"responsable",s)},expression:"activity.responsable"}})],1)],1),s("v-col",[s("v-textarea",{staticClass:"mt-3",attrs:{"auto-grow":"",rows:"1",color:"blue darken-3",label:"Descripcion",outlined:"","single-line":"",readonly:!t.verifyAuthorizedUser(e.responsable)},model:{value:e.description,callback:function(s){t.$set(e,"description",s)},expression:"activity.description"}})],1),s("v-col",[s("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[s("v-text-field",t._g({attrs:{placeholder:"YY/mm/dd","prepend-icon":"mdi-calendar",autocomplete:!1},model:{value:e.proposedDate,callback:function(s){t.$set(e,"proposedDate",s)},expression:"activity.proposedDate"}},i))]}}],null,!0)},[s("v-date-picker",{attrs:{color:"light-blue darken-4",locale:"es-419",min:"2017/01","no-title":"",disabled:!t.verifyAuthorizedUser(e.responsable),autocomplete:!1},model:{value:e.proposedDate,callback:function(s){t.$set(e,"proposedDate",s)},expression:"activity.proposedDate"}})],1)],1),s("v-col",[s("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[s("v-text-field",t._g({attrs:{placeholder:"YY/mm/dd","prepend-icon":"mdi-calendar",autocomplete:!1},model:{value:e.realDate,callback:function(s){t.$set(e,"realDate",s)},expression:"activity.realDate"}},i))]}}],null,!0)},[s("v-date-picker",{attrs:{color:"light-blue darken-4",locale:"es-419",autocomplete:!1,min:"2017/01","no-title":"",disabled:!t.verifyAuthorizedUser(e.responsable)},model:{value:e.realDate,callback:function(s){t.$set(e,"realDate",s)},expression:"activity.realDate"}})],1)],1),t.verifyLastRow(a,t.correctionsData.length)?s("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{fab:"",small:"",color:"light-blue darken-2",disabled:!t.isAdminOrGeneralResponsable()},on:{click:t.addCorrection}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-plus")])],1):s("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{fab:"",small:"",color:"light-blue darken-2",disabled:!t.isAdminOrGeneralResponsable()},on:{click:function(e){return t.removeCorrection(a)}}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-minus")])],1),s("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{disabled:!t.verifyAuthorizedUser(e.responsable),color:"light-blue darken-2",fab:"",small:""},on:{click:function(s){return t.getAttachmentRoute(e)}}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-paperclip")])],1)],1)}))],2)},A=[];function _(){return Date.now().toString()+Math.random().toString(36).substr(2,5).toUpperCase()}function I(t){return""!==t.name&&""!==t.responsable}function E(t){return t.role===h["a"]}function R(t,e){let s=t.find(t=>t.name.value===e._id);return void 0!==s}var S={props:{correctionsData:{type:Array,default:function(){return[]}},actualUser:{type:Object,default:function(){return{}}},responsible:{type:Array,default:function(){return[]}}},data(){return{correctionHeaders:["Actividad","Responsable","Descripción","Fecha propuesta","Fecha real"],verifyLastRow:o,users:[],items:[],attachmentRoute:"",actionPlanID:""}},mounted(){this.getUsers(),this.checkCorrectionsData(),this.actionPlanID=this.$route.query.id},methods:{addCorrection(){let t={id:_(),name:"",responsable:"",description:"",proposedDate:"",realDate:"",eventCreated:!1};this.correctionsData.push(t)},removeCorrection(t){this.correctionsData.splice(t,1)},getUsers(){let t={headers:{"x-access-token":this.$store.state.token}};c.a.get(h["b"]+"/api/users",t).then(t=>{this.users=t.data,this.formatUsers()}).catch(t=>{console.log(t)})},formatUsers(){this.users.forEach(t=>{let e=this.getNameWithFormat(t.firstNames,t.paternalLastName,t.maternalLastName);this.items.push({text:e,value:t._id})})},getNameWithFormat(t,e,s){return t+" "+e+" "+s},checkCorrectionsData(){this.correctionsData.length<1&&this.addCorrection()},isAdminOrGeneralResponsable(){return E(this.actualUser)||R(this.responsible,this.actualUser)},verifyAuthorizedUser(t){return this.isAdminOrGeneralResponsable()||t.value===this.actualUser._id},getAttachmentRoute(t){I(t)?(this.attachmentRoute="/attachments?userID="+this.actualUser.value+"&actionPlanID="+this.actionPlanID+"&activityID="+t.id,this.$emit("save-action-plan"),this.$router.push(this.attachmentRoute)):this.attachmentRoute=""},createEvent(){console.log("llegue")}}},Y=S,F=(s("d951"),s("9d26")),O=s("a9ad"),P=s("58df"),B=s("80d2"),M=Object(P["a"])(O["a"]).extend({methods:{genPickerButton(t,e,s,a=!1,i=""){const n=this[t]===e,r=s=>{s.stopPropagation(),this.$emit(`update:${Object(B["v"])(t)}`,e)};return this.$createElement("div",{staticClass:`v-picker__title__btn ${i}`.trim(),class:{"v-picker__title__btn--active":n,"v-picker__title__btn--readonly":a},on:n||a?void 0:{click:r}},Array.isArray(s)?s:[s])}}}),U=Object(P["a"])(M).extend({name:"v-date-picker-title",props:{date:{type:String,default:""},disabled:Boolean,readonly:Boolean,selectingYear:Boolean,value:{type:String},year:{type:[Number,String],default:""},yearIcon:{type:String}},data:()=>({isReversing:!1}),computed:{computedTransition(){return this.isReversing?"picker-reverse-transition":"picker-transition"}},watch:{value(t,e){this.isReversing=t<e}},methods:{genYearIcon(){return this.$createElement(F["a"],{props:{dark:!0}},this.yearIcon)},getYearBtn(){return this.genPickerButton("selectingYear",!0,[String(this.year),this.yearIcon?this.genYearIcon():null],!1,"v-date-picker-title__year")},genTitleText(){return this.$createElement("transition",{props:{name:this.computedTransition}},[this.$createElement("div",{domProps:{innerHTML:this.date||"&nbsp;"},key:this.value})])},genTitleDate(){return this.genPickerButton("selectingYear",!1,[this.genTitleText()],!1,"v-date-picker-title__date")}},render(t){return t("div",{staticClass:"v-date-picker-title",class:{"v-date-picker-title--disabled":this.disabled}},[this.getYearBtn(),this.genTitleDate()])}}),N=(s("2102"),s("afdd")),V=s("2b0e"),j=V["a"].extend({name:"localable",props:{locale:String},computed:{currentLocale(){return this.locale||this.$vuetify.lang.current}}}),L=s("7560");const W=(t,e,s)=>{return e>>=0,t=String(t),s=String(s),t.length>e?String(t):(e-=t.length,e>s.length&&(s+=s.repeat(e/s.length)),s.slice(0,e)+String(t))};var H=(t,e=2)=>W(t,e,"0");function X(t,e,s={start:0,length:0}){const a=t=>{const[e,s,a]=t.trim().split(" ")[0].split("-");return[H(e,4),H(s||1),H(a||1)].join("-")};try{const s=new Intl.DateTimeFormat(t||void 0,e);return t=>s.format(new Date(`${a(t)}T00:00:00+00:00`))}catch(i){return s.start||s.length?t=>a(t).substr(s.start||0,s.length):void 0}}var z=X,G=(t,e)=>{const[s,a]=t.split("-").map(Number);return a+e===0?`${s-1}-12`:a+e===13?`${s+1}-01`:`${s}-${H(a+e)}`},Z=Object(P["a"])(O["a"],j,L["a"]).extend({name:"v-date-picker-header",props:{disabled:Boolean,format:Function,min:String,max:String,nextIcon:{type:String,default:"$vuetify.icons.next"},prevIcon:{type:String,default:"$vuetify.icons.prev"},readonly:Boolean,value:{type:[Number,String],required:!0}},data(){return{isReversing:!1}},computed:{formatter(){return this.format?this.format:String(this.value).split("-")[1]?z(this.currentLocale,{month:"long",year:"numeric",timeZone:"UTC"},{length:7}):z(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4})}},watch:{value(t,e){this.isReversing=t<e}},methods:{genBtn(t){const e=this.disabled||t<0&&this.min&&this.calculateChange(t)<this.min||t>0&&this.max&&this.calculateChange(t)>this.max;return this.$createElement(N["a"],{props:{dark:this.dark,disabled:e,icon:!0,light:this.light},nativeOn:{click:e=>{e.stopPropagation(),this.$emit("input",this.calculateChange(t))}}},[this.$createElement(F["a"],t<0===!this.$vuetify.rtl?this.prevIcon:this.nextIcon)])},calculateChange(t){const[e,s]=String(this.value).split("-").map(Number);return null==s?`${e+t}`:G(String(this.value),t)},genHeader(){const t=!this.disabled&&(this.color||"accent"),e=this.$createElement("div",this.setTextColor(t,{key:String(this.value)}),[this.$createElement("button",{attrs:{type:"button"},on:{click:()=>this.$emit("toggle")}},[this.$slots.default||this.formatter(String(this.value))])]),s=this.$createElement("transition",{props:{name:this.isReversing===!this.$vuetify.rtl?"tab-reverse-transition":"tab-transition"}},[e]);return this.$createElement("div",{staticClass:"v-date-picker-header__value",class:{"v-date-picker-header__value--disabled":this.disabled}},[s])}},render(){return this.$createElement("div",{staticClass:"v-date-picker-header",class:{"v-date-picker-header--disabled":this.disabled,...this.themeClasses}},[this.genBtn(-1),this.genHeader(),this.genBtn(1)])}}),q=(s("c982"),s("c3f0"));function J(t,e,s,a){return(!a||a(t))&&(!e||t>=e)&&(!s||t<=s)}var K=Object(P["a"])(O["a"],j,L["a"]).extend({directives:{Touch:q["a"]},props:{allowedDates:Function,current:String,disabled:Boolean,format:Function,events:{type:[Array,Function,Object],default:()=>null},eventColor:{type:[Array,Function,Object,String],default:()=>"warning"},min:String,max:String,readonly:Boolean,scrollable:Boolean,tableDate:{type:String,required:!0},value:[String,Array]},data:()=>({isReversing:!1}),computed:{computedTransition(){return this.isReversing===!this.$vuetify.rtl?"tab-reverse-transition":"tab-transition"},displayedMonth(){return Number(this.tableDate.split("-")[1])-1},displayedYear(){return Number(this.tableDate.split("-")[0])}},watch:{tableDate(t,e){this.isReversing=t<e}},methods:{genButtonClasses(t,e,s,a){return{"v-size--default":!e,"v-btn--active":s,"v-btn--flat":!t||this.disabled,"v-btn--text":s===a,"v-btn--rounded":e,"v-btn--disabled":!t||this.disabled,"v-btn--outlined":a&&!s,...this.themeClasses}},genButtonEvents(t,e,s){if(!this.disabled)return{click:()=>{e&&!this.readonly&&this.$emit("input",t),this.$emit(`click:${s}`,t)},dblclick:()=>this.$emit(`dblclick:${s}`,t)}},genButton(t,e,s,a){const i=J(t,this.min,this.max,this.allowedDates),n=t===this.value||Array.isArray(this.value)&&-1!==this.value.indexOf(t),r=t===this.current,o=n?this.setBackgroundColor:this.setTextColor,l=(n||r)&&(this.color||"accent");return this.$createElement("button",o(l,{staticClass:"v-btn",class:this.genButtonClasses(i,e,n,r),attrs:{type:"button"},domProps:{disabled:this.disabled||!i},on:this.genButtonEvents(t,i,s)}),[this.$createElement("div",{staticClass:"v-btn__content"},[a(t)]),this.genEvents(t)])},getEventColors(t){const e=t=>Array.isArray(t)?t:[t];let s,a=[];return s=Array.isArray(this.events)?this.events.includes(t):this.events instanceof Function?this.events(t)||!1:this.events&&this.events[t]||!1,s?(a=!0!==s?e(s):"string"===typeof this.eventColor?[this.eventColor]:"function"===typeof this.eventColor?e(this.eventColor(t)):Array.isArray(this.eventColor)?this.eventColor:e(this.eventColor[t]),a.filter(t=>t)):[]},genEvents(t){const e=this.getEventColors(t);return e.length?this.$createElement("div",{staticClass:"v-date-picker-table__events"},e.map(t=>this.$createElement("div",this.setBackgroundColor(t)))):null},wheel(t,e){t.preventDefault(),this.$emit("update:table-date",e(t.deltaY))},touch(t,e){this.$emit("update:table-date",e(t))},genTable(t,e,s){const a=this.$createElement("transition",{props:{name:this.computedTransition}},[this.$createElement("table",{key:this.tableDate},e)]),i={name:"touch",value:{left:t=>t.offsetX<-15&&this.touch(1,s),right:t=>t.offsetX>15&&this.touch(-1,s)}};return this.$createElement("div",{staticClass:t,class:{"v-date-picker-table--disabled":this.disabled,...this.themeClasses},on:!this.disabled&&this.scrollable?{wheel:t=>this.wheel(t,s)}:void 0,directives:[i]},[a])}}}),Q=Object(P["a"])(K).extend({name:"v-date-picker-date-table",props:{firstDayOfWeek:{type:[String,Number],default:0},showWeek:Boolean,weekdayFormat:Function},computed:{formatter(){return this.format||z(this.currentLocale,{day:"numeric",timeZone:"UTC"},{start:8,length:2})},weekdayFormatter(){return this.weekdayFormat||z(this.currentLocale,{weekday:"narrow",timeZone:"UTC"})},weekDays(){const t=parseInt(this.firstDayOfWeek,10);return this.weekdayFormatter?Object(B["h"])(7).map(e=>this.weekdayFormatter(`2017-01-${t+e+15}`)):Object(B["h"])(7).map(e=>["S","M","T","W","T","F","S"][(e+t)%7])}},methods:{calculateTableDate(t){return G(this.tableDate,Math.sign(t||1))},genTHead(){const t=this.weekDays.map(t=>this.$createElement("th",t));return this.showWeek&&t.unshift(this.$createElement("th")),this.$createElement("thead",this.genTR(t))},weekDaysBeforeFirstDayOfTheMonth(){const t=new Date(`${this.displayedYear}-${H(this.displayedMonth+1)}-01T00:00:00+00:00`),e=t.getUTCDay();return(e-parseInt(this.firstDayOfWeek)+7)%7},getWeekNumber(){let t=[0,31,59,90,120,151,181,212,243,273,304,334][this.displayedMonth];this.displayedMonth>1&&(this.displayedYear%4===0&&this.displayedYear%100!==0||this.displayedYear%400===0)&&t++;const e=(this.displayedYear+(this.displayedYear-1>>2)-Math.floor((this.displayedYear-1)/100)+Math.floor((this.displayedYear-1)/400)-Number(this.firstDayOfWeek))%7;return Math.floor((t+e)/7)+1},genWeekNumber(t){return this.$createElement("td",[this.$createElement("small",{staticClass:"v-date-picker-table--date__week"},String(t).padStart(2,"0"))])},genTBody(){const t=[],e=new Date(this.displayedYear,this.displayedMonth+1,0).getDate();let s=[],a=this.weekDaysBeforeFirstDayOfTheMonth(),i=this.getWeekNumber();this.showWeek&&s.push(this.genWeekNumber(i++));while(a--)s.push(this.$createElement("td"));for(a=1;a<=e;a++){const n=`${this.displayedYear}-${H(this.displayedMonth+1)}-${H(a)}`;s.push(this.$createElement("td",[this.genButton(n,!0,"date",this.formatter)])),s.length%(this.showWeek?8:7)===0&&(t.push(this.genTR(s)),s=[],a<e&&this.showWeek&&s.push(this.genWeekNumber(i++)))}return s.length&&t.push(this.genTR(s)),this.$createElement("tbody",t)},genTR(t){return[this.$createElement("tr",t)]}},render(){return this.genTable("v-date-picker-table v-date-picker-table--date",[this.genTHead(),this.genTBody()],this.calculateTableDate)}}),tt=Object(P["a"])(K).extend({name:"v-date-picker-month-table",computed:{formatter(){return this.format||z(this.currentLocale,{month:"short",timeZone:"UTC"},{start:5,length:2})}},methods:{calculateTableDate(t){return`${parseInt(this.tableDate,10)+Math.sign(t||1)}`},genTBody(){const t=[],e=Array(3).fill(null),s=12/e.length;for(let a=0;a<s;a++){const s=e.map((t,s)=>{const i=a*e.length+s,n=`${this.displayedYear}-${H(i+1)}`;return this.$createElement("td",{key:i},[this.genButton(n,!1,"month",this.formatter)])});t.push(this.$createElement("tr",{key:a},s))}return this.$createElement("tbody",t)}},render(){return this.genTable("v-date-picker-table v-date-picker-table--month",[this.genTBody()],this.calculateTableDate)}}),et=(s("02f0"),Object(P["a"])(O["a"],j).extend({name:"v-date-picker-years",props:{format:Function,min:[Number,String],max:[Number,String],readonly:Boolean,value:[Number,String]},data(){return{defaultColor:"primary"}},computed:{formatter(){return this.format||z(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4})}},mounted(){setTimeout(()=>{const t=this.$el.getElementsByClassName("active")[0];t?this.$el.scrollTop=t.offsetTop-this.$el.offsetHeight/2+t.offsetHeight/2:this.min&&!this.max?this.$el.scrollTop=this.$el.scrollHeight:!this.min&&this.max?this.$el.scrollTop=0:this.$el.scrollTop=this.$el.scrollHeight/2-this.$el.offsetHeight/2})},methods:{genYearItem(t){const e=this.formatter(`${t}`),s=parseInt(this.value,10)===t,a=s&&(this.color||"primary");return this.$createElement("li",this.setTextColor(a,{key:t,class:{active:s},on:{click:()=>this.$emit("input",t)}}),e)},genYearItems(){const t=[],e=this.value?parseInt(this.value,10):(new Date).getFullYear(),s=this.max?parseInt(this.max,10):e+100,a=Math.min(s,this.min?parseInt(this.min,10):e-100);for(let i=s;i>=a;i--)t.push(this.genYearItem(i));return t}},render(){return this.$createElement("ul",{staticClass:"v-date-picker-years",ref:"years"},this.genYearItems())}})),st=(s("e53c"),s("615b"),Object(P["a"])(O["a"],L["a"]).extend({name:"v-picker",props:{fullWidth:Boolean,landscape:Boolean,noTitle:Boolean,transition:{type:String,default:"fade-transition"},width:{type:[Number,String],default:290}},computed:{computedTitleColor(){const t=!this.isDark&&(this.color||"primary");return this.color||t}},methods:{genTitle(){return this.$createElement("div",this.setBackgroundColor(this.computedTitleColor,{staticClass:"v-picker__title",class:{"v-picker__title--landscape":this.landscape}}),this.$slots.title)},genBodyTransition(){return this.$createElement("transition",{props:{name:this.transition}},this.$slots.default)},genBody(){return this.$createElement("div",{staticClass:"v-picker__body",class:{"v-picker__body--no-title":this.noTitle,...this.themeClasses},style:this.fullWidth?void 0:{width:Object(B["f"])(this.width)}},[this.genBodyTransition()])},genActions(){return this.$createElement("div",{staticClass:"v-picker__actions v-card__actions",class:{"v-picker__actions--no-title":this.noTitle}},this.$slots.actions)}},render(t){return t("div",{staticClass:"v-picker v-card",class:{"v-picker--landscape":this.landscape,"v-picker--full-width":this.fullWidth,...this.themeClasses}},[this.$slots.title?this.genTitle():null,this.genBody(),this.$slots.actions?this.genActions():null])}})),at=st,it=Object(P["a"])(O["a"],L["a"]).extend({name:"picker",props:{fullWidth:Boolean,headerColor:String,landscape:Boolean,noTitle:Boolean,width:{type:[Number,String],default:290}},methods:{genPickerTitle(){return null},genPickerBody(){return null},genPickerActionsSlot(){return this.$scopedSlots.default?this.$scopedSlots.default({save:this.save,cancel:this.cancel}):this.$slots.default},genPicker(t){const e=[];if(!this.noTitle){const t=this.genPickerTitle();t&&e.push(t)}const s=this.genPickerBody();return s&&e.push(s),e.push(this.$createElement("template",{slot:"actions"},[this.genPickerActionsSlot()])),this.$createElement(at,{staticClass:t,props:{color:this.headerColor||this.color,dark:this.dark,fullWidth:this.fullWidth,landscape:this.landscape,light:this.light,width:this.width,noTitle:this.noTitle}},e)}}}),nt=s("d9bd");const rt=[0,31,28,31,30,31,30,31,31,30,31,30,31],ot=[0,31,29,31,30,31,30,31,31,30,31,30,31];function lt(t){return t%4===0&&t%100!==0||t%400===0}function ct(t,e){return lt(t)?ot[e]:rt[e]}function ht(t,e){const[s,a=1,i=1]=t.split("-");return`${s}-${H(a)}-${H(i)}`.substr(0,{date:10,month:7,year:4}[e])}var ut=Object(P["a"])(j,it).extend({name:"v-date-picker",props:{allowedDates:Function,dayFormat:Function,disabled:Boolean,events:{type:[Array,Function,Object],default:()=>null},eventColor:{type:[Array,Function,Object,String],default:()=>"warning"},firstDayOfWeek:{type:[String,Number],default:0},headerDateFormat:Function,max:String,min:String,monthFormat:Function,multiple:Boolean,nextIcon:{type:String,default:"$vuetify.icons.next"},pickerDate:String,prevIcon:{type:String,default:"$vuetify.icons.prev"},reactive:Boolean,readonly:Boolean,scrollable:Boolean,showCurrent:{type:[Boolean,String],default:!0},selectedItemsText:{type:String,default:"$vuetify.datePicker.itemsSelected"},showWeek:Boolean,titleDateFormat:Function,type:{type:String,default:"date",validator:t=>["date","month"].includes(t)},value:[Array,String],weekdayFormat:Function,yearFormat:Function,yearIcon:String},data(){const t=new Date;return{activePicker:this.type.toUpperCase(),inputDay:null,inputMonth:null,inputYear:null,isReversing:!1,now:t,tableDate:(()=>{if(this.pickerDate)return this.pickerDate;const e=(this.multiple?this.value[this.value.length-1]:this.value)||`${t.getFullYear()}-${t.getMonth()+1}`;return ht(e,"date"===this.type?"month":"year")})()}},computed:{lastValue(){return this.multiple?this.value[this.value.length-1]:this.value},selectedMonths(){return this.value&&this.value.length&&"month"!==this.type?this.multiple?this.value.map(t=>t.substr(0,7)):this.value.substr(0,7):this.value},current(){return!0===this.showCurrent?ht(`${this.now.getFullYear()}-${this.now.getMonth()+1}-${this.now.getDate()}`,this.type):this.showCurrent||null},inputDate(){return"date"===this.type?`${this.inputYear}-${H(this.inputMonth+1)}-${H(this.inputDay)}`:`${this.inputYear}-${H(this.inputMonth+1)}`},tableMonth(){return Number((this.pickerDate||this.tableDate).split("-")[1])-1},tableYear(){return Number((this.pickerDate||this.tableDate).split("-")[0])},minMonth(){return this.min?ht(this.min,"month"):null},maxMonth(){return this.max?ht(this.max,"month"):null},minYear(){return this.min?ht(this.min,"year"):null},maxYear(){return this.max?ht(this.max,"year"):null},formatters(){return{year:this.yearFormat||z(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4}),titleDate:this.titleDateFormat||(this.multiple?this.defaultTitleMultipleDateFormatter:this.defaultTitleDateFormatter)}},defaultTitleMultipleDateFormatter(){return t=>{return t.length?1===t.length?this.defaultTitleDateFormatter(t[0]):this.$vuetify.lang.t(this.selectedItemsText,t.length):"-"}},defaultTitleDateFormatter(){const t={year:{year:"numeric",timeZone:"UTC"},month:{month:"long",timeZone:"UTC"},date:{weekday:"short",month:"short",day:"numeric",timeZone:"UTC"}},e=z(this.currentLocale,t[this.type],{start:0,length:{date:10,month:7,year:4}[this.type]}),s=t=>e(t).replace(/([^\d\s])([\d])/g,(t,e,s)=>`${e} ${s}`).replace(", ",",<br>");return this.landscape?s:e}},watch:{tableDate(t,e){const s="month"===this.type?"year":"month";this.isReversing=ht(t,s)<ht(e,s),this.$emit("update:picker-date",t)},pickerDate(t){t?this.tableDate=t:this.lastValue&&"date"===this.type?this.tableDate=ht(this.lastValue,"month"):this.lastValue&&"month"===this.type&&(this.tableDate=ht(this.lastValue,"year"))},value(t,e){this.checkMultipleProp(),this.setInputDate(),this.multiple||!this.value||this.pickerDate?this.multiple&&this.value.length&&!e.length&&!this.pickerDate&&(this.tableDate=ht(this.inputDate,"month"===this.type?"year":"month")):this.tableDate=ht(this.inputDate,"month"===this.type?"year":"month")},type(t){if(this.activePicker=t.toUpperCase(),this.value&&this.value.length){const e=(this.multiple?this.value:[this.value]).map(e=>ht(e,t)).filter(this.isDateAllowed);this.$emit("input",this.multiple?e:e[0])}}},created(){this.checkMultipleProp(),this.pickerDate!==this.tableDate&&this.$emit("update:picker-date",this.tableDate),this.setInputDate()},methods:{emitInput(t){const e=this.multiple?-1===this.value.indexOf(t)?this.value.concat([t]):this.value.filter(e=>e!==t):t;this.$emit("input",e),this.multiple||this.$emit("change",t)},checkMultipleProp(){if(null==this.value)return;const t=this.value.constructor.name,e=this.multiple?"Array":"String";t!==e&&Object(nt["c"])(`Value must be ${this.multiple?"an":"a"} ${e}, got ${t}`,this)},isDateAllowed(t){return J(t,this.min,this.max,this.allowedDates)},yearClick(t){this.inputYear=t,"month"===this.type?this.tableDate=`${t}`:this.tableDate=`${t}-${H((this.tableMonth||0)+1)}`,this.activePicker="MONTH",this.reactive&&!this.readonly&&!this.multiple&&this.isDateAllowed(this.inputDate)&&this.$emit("input",this.inputDate)},monthClick(t){this.inputYear=parseInt(t.split("-")[0],10),this.inputMonth=parseInt(t.split("-")[1],10)-1,"date"===this.type?(this.inputDay&&(this.inputDay=Math.min(this.inputDay,ct(this.inputYear,this.inputMonth+1))),this.tableDate=t,this.activePicker="DATE",this.reactive&&!this.readonly&&!this.multiple&&this.isDateAllowed(this.inputDate)&&this.$emit("input",this.inputDate)):this.emitInput(this.inputDate)},dateClick(t){this.inputYear=parseInt(t.split("-")[0],10),this.inputMonth=parseInt(t.split("-")[1],10)-1,this.inputDay=parseInt(t.split("-")[2],10),this.emitInput(this.inputDate)},genPickerTitle(){return this.$createElement(U,{props:{date:this.value?this.formatters.titleDate(this.value):"",disabled:this.disabled,readonly:this.readonly,selectingYear:"YEAR"===this.activePicker,year:this.formatters.year(this.value?`${this.inputYear}`:this.tableDate),yearIcon:this.yearIcon,value:this.multiple?this.value[0]:this.value},slot:"title",on:{"update:selecting-year":t=>this.activePicker=t?"YEAR":this.type.toUpperCase()}})},genTableHeader(){return this.$createElement(Z,{props:{nextIcon:this.nextIcon,color:this.color,dark:this.dark,disabled:this.disabled,format:this.headerDateFormat,light:this.light,locale:this.locale,min:"DATE"===this.activePicker?this.minMonth:this.minYear,max:"DATE"===this.activePicker?this.maxMonth:this.maxYear,prevIcon:this.prevIcon,readonly:this.readonly,value:"DATE"===this.activePicker?`${H(this.tableYear,4)}-${H(this.tableMonth+1)}`:`${H(this.tableYear,4)}`},on:{toggle:()=>this.activePicker="DATE"===this.activePicker?"MONTH":"YEAR",input:t=>this.tableDate=t}})},genDateTable(){return this.$createElement(Q,{props:{allowedDates:this.allowedDates,color:this.color,current:this.current,dark:this.dark,disabled:this.disabled,events:this.events,eventColor:this.eventColor,firstDayOfWeek:this.firstDayOfWeek,format:this.dayFormat,light:this.light,locale:this.locale,min:this.min,max:this.max,readonly:this.readonly,scrollable:this.scrollable,showWeek:this.showWeek,tableDate:`${H(this.tableYear,4)}-${H(this.tableMonth+1)}`,value:this.value,weekdayFormat:this.weekdayFormat},ref:"table",on:{input:this.dateClick,"update:table-date":t=>this.tableDate=t,"click:date":t=>this.$emit("click:date",t),"dblclick:date":t=>this.$emit("dblclick:date",t)}})},genMonthTable(){return this.$createElement(tt,{props:{allowedDates:"month"===this.type?this.allowedDates:null,color:this.color,current:this.current?ht(this.current,"month"):null,dark:this.dark,disabled:this.disabled,events:"month"===this.type?this.events:null,eventColor:"month"===this.type?this.eventColor:null,format:this.monthFormat,light:this.light,locale:this.locale,min:this.minMonth,max:this.maxMonth,readonly:this.readonly&&"month"===this.type,scrollable:this.scrollable,value:this.selectedMonths,tableDate:`${H(this.tableYear,4)}`},ref:"table",on:{input:this.monthClick,"update:table-date":t=>this.tableDate=t,"click:month":t=>this.$emit("click:month",t),"dblclick:month":t=>this.$emit("dblclick:month",t)}})},genYears(){return this.$createElement(et,{props:{color:this.color,format:this.yearFormat,locale:this.locale,min:this.minYear,max:this.maxYear,value:this.tableYear},on:{input:this.yearClick}})},genPickerBody(){const t="YEAR"===this.activePicker?[this.genYears()]:[this.genTableHeader(),"DATE"===this.activePicker?this.genDateTable():this.genMonthTable()];return this.$createElement("div",{key:this.activePicker},t)},setInputDate(){if(this.lastValue){const t=this.lastValue.split("-");this.inputYear=parseInt(t[0],10),this.inputMonth=parseInt(t[1],10)-1,"date"===this.type&&(this.inputDay=parseInt(t[2],10))}else this.inputYear=this.inputYear||this.now.getFullYear(),this.inputMonth=null==this.inputMonth?this.inputMonth:this.now.getMonth(),this.inputDay=this.inputDay||this.now.getDate()}},render(){return this.genPicker("v-picker--date")}}),dt=s("e449"),pt=s("a844"),mt=Object(p["a"])(Y,T,A,!1,null,null,null),vt=mt.exports;v()(mt,{VBtn:b["a"],VCard:f["a"],VCol:g["a"],VCombobox:y["a"],VContainer:k["a"],VDatePicker:ut,VIcon:D["a"],VMenu:dt["a"],VRow:x["a"],VTextField:$["a"],VTextarea:pt["a"]});var bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-card",{staticClass:"pt-5 mb-5 white--text",attrs:{color:"light-blue darken-4"}},[s("h4",{staticClass:"text-center pb-5"},[t._v("ACCIONES PARA ELIMINAR LA CAUSA RAÍZ")])]),s("v-row",[t._l(t.actionsHeaders,(function(e,a){return s("v-col",{key:a},[s("h4",[t._v(t._s(e))])])})),s("div",{staticClass:"mr-5 mt-3"},[s("b",[t._v("Opciones")])])],2),t._l(t.actionsData,(function(e,a){return s("v-row",{key:a},[s("v-col",[s("v-textarea",{staticClass:"mt-3",attrs:{"auto-grow":"",rows:"1",color:"blue darken-3",label:"Actividad",outlined:"",readonly:!t.isAdminOrGeneralResponsable()},model:{value:e.name,callback:function(s){t.$set(e,"name",s)},expression:"activity.name"}})],1),s("v-col",[s("v-combobox",{attrs:{color:"blue darken-3","item-color":"blue",items:t.items,label:"Responsable",autocomplete:!1,dense:"",readonly:!t.isAdminOrGeneralResponsable()},model:{value:e.responsable,callback:function(s){t.$set(e,"responsable",s)},expression:"activity.responsable"}})],1),s("v-col",[s("v-textarea",{staticClass:"mt-3",attrs:{"auto-grow":"",rows:"1",color:"blue darken-3",label:"Descripcion",outlined:"",readonly:!t.verifyAuthorizedUser(e.responsable)},model:{value:e.description,callback:function(s){t.$set(e,"description",s)},expression:"activity.description"}})],1),s("v-col",[s("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"",color:"light-blue darken-4","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[s("v-text-field",t._g({attrs:{placeholder:"YY/mm/dd","prepend-icon":"mdi-calendar",color:"light-blue darken-4"},model:{value:e.proposedDate,callback:function(s){t.$set(e,"proposedDate",s)},expression:"activity.proposedDate"}},i))]}}],null,!0)},[s("v-date-picker",{attrs:{color:"light-blue darken-4",locale:"es-419",min:"2017/01","no-title":"",disabled:!t.verifyAuthorizedUser(e.responsable)},model:{value:e.proposedDate,callback:function(s){t.$set(e,"proposedDate",s)},expression:"activity.proposedDate"}})],1)],1),s("v-col",[s("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"",color:"light-blue darken-4","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[s("v-text-field",t._g({attrs:{color:"light-blue darken-4",placeholder:"YY/mm/dd","prepend-icon":"mdi-calendar"},model:{value:e.realDate,callback:function(s){t.$set(e,"realDate",s)},expression:"activity.realDate"}},i))]}}],null,!0)},[s("v-date-picker",{attrs:{color:"light-blue darken-4",locale:"es-419",min:"2017/01","no-title":"",disabled:!t.verifyAuthorizedUser(e.responsable)},model:{value:e.realDate,callback:function(s){t.$set(e,"realDate",s)},expression:"activity.realDate"}})],1)],1),t.verifyLastRow(a,t.actionsData.length)?s("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{color:"light-blue darken-2",disabled:!t.isAdminOrGeneralResponsable(),fab:"",small:""},on:{click:t.addActivity}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-plus")])],1):s("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{color:"light-blue darken-2",disabled:!t.isAdminOrGeneralResponsable(),fab:"",small:""},on:{click:function(e){return t.removeActivity(a)}}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-minus")])],1),s("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{color:"light-blue darken-2",fab:"",small:"",disabled:!t.verifyAuthorizedUser(e.responsable)},on:{click:function(s){return t.getAttachmentRoute(e)}}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-paperclip")])],1)],1)}))],2)},ft=[],gt={props:{actionsData:{type:Array,default:function(){return[]}},actualUser:{type:Object,default:function(){return{}}},responsible:{type:Array,default:function(){return[]}}},data(){return{actionsHeaders:["Actividad","Responsable","Descripción","Fecha propuesta","Fecha real"],verifyLastRow:o,users:[],items:[],actionPlanID:"",attachmentRoute:""}},mounted(){this.getUsers(),this.checkActionsData(),this.actionPlanID=this.$route.query.id},methods:{addActivity(){let t={id:_(),name:"",responsable:"",description:"",proposedDate:"",realDate:"",eventCreated:!1};this.actionsData.push(t)},removeActivity(t){this.actionsData.splice(t,1)},getUsers(){let t={headers:{"x-access-token":this.$store.state.token}};c.a.get(h["b"]+"/api/users",t).then(t=>{this.users=t.data}).catch(t=>{console.log(t)}).then(()=>{this.formatUsers()})},formatUsers(){this.users.forEach(t=>{let e=this.getNameWithFormat(t.firstNames,t.paternalLastName,t.maternalLastName);this.items.push({text:e,value:t._id})})},getNameWithFormat(t,e,s){return t+" "+e+" "+s},checkActionsData(){this.actionsData.length<1&&this.addActivity()},isAdminOrGeneralResponsable(){return E(this.actualUser)||R(this.responsible,this.actualUser)},verifyAuthorizedUser(t){return this.isAdminOrGeneralResponsable()||t.value===this.actualUser._id},getAttachmentRoute(t){I(t)?(this.attachmentRoute="/attachments?userID="+this.actualUser.value+"&actionPlanID="+this.actionPlanID+"&activityID="+t.id,this.$emit("save-action-plan"),this.$router.push(this.attachmentRoute)):this.attachmentRoute=""}}},yt=gt,kt=Object(p["a"])(yt,bt,ft,!1,null,null,null),Dt=kt.exports;v()(kt,{VBtn:b["a"],VCard:f["a"],VCol:g["a"],VCombobox:y["a"],VContainer:k["a"],VDatePicker:ut,VIcon:D["a"],VMenu:dt["a"],VRow:x["a"],VTextField:$["a"],VTextarea:pt["a"]});var xt={components:{ReponsibleTable:C,CorrectionTable:vt,ActionsTable:Dt},data(){return{idActionPlan:"",activateLoading:!1,text:"GUARDAR",actionPlanFormat:{},structure:{},responsible:[],textMessage:"",snackbar:!1,timeout:1200,descriptionIndex:{row:-1,column:-1},responsibleIndex:{row:-1,column:-1},user:{},isUserAuthorized:!1}},beforeMount(){this.getActualUser()},mounted(){this.idActionPlan=this.$route.query.id,this.getActionPlanFormat()},methods:{getWidthColumns(t){return 12/t},activateProgressCircular(){this.activateLoading=!0,this.text="",this.saveActionPlan(),setTimeout(this.disableProgressCircular,1e3)},disableProgressCircular(){this.text="GUARDAR",this.activateLoading=!1},getActionPlanFormat(){let t={headers:{"x-access-token":this.$store.state.token}};c.a.get(h["b"]+"/api/action-plans/"+this.idActionPlan,t).then(t=>{this.actionPlanFormat=t.data,this.structure=this.actionPlanFormat.structure,this.getFieldIndexes(),this.setDescription(),this.checkResponsible()}).catch(t=>{console.log(t)})},saveActionPlan(){let t={headers:{"x-access-token":this.$store.state.token}};this.existDescription()&&(this.actionPlanFormat.description=this.actionPlanFormat.structure.rows[this.descriptionIndex.row][this.descriptionIndex.column].value),c.a.put(h["b"]+"/api/action-plans/"+this.idActionPlan,this.actionPlanFormat,t).then(t=>{console.log(t),this.snackbar=!0,this.textMessage="Se ha guardado correctamente el plan de acción"}).catch(t=>{console.log(t)})},getFieldIndexes(){for(let t=0;t<this.structure.rows.length;t++)for(let e=0;e<this.structure.rows[t].length;e++)"Descripción"===this.structure.rows[t][e].name&&(this.descriptionIndex.row=t,this.descriptionIndex.column=e),"responsible"===this.structure.rows[t][e].fieldType&&(this.responsibleIndex.row=t,this.responsibleIndex.column=e)},checkResponsible(){this.responsibleIndex.row>-1&&this.responsibleIndex.column>-1?this.responsible=this.structure.rows[this.responsibleIndex.row][this.responsibleIndex.column].value:this.responsible=[]},existDescription(){return this.descriptionIndex.row>-1&&this.descriptionIndex.column>-1},setDescription(){this.existDescription()&&(this.structure.rows[this.descriptionIndex.row][this.descriptionIndex.column].value=this.actionPlanFormat.description)},getActualUser(){let t=this.$store.state.token,e={headers:{"x-access-token":t}};c.a.get(h["b"]+"/api/users/token/"+t,e).then(t=>{this.user=t.data,this.isUserAuthorized=E(this.user)}).catch(t=>{console.log(t)})},updateResponsibleList(){this.responsible=this.structure.rows[this.responsibleIndex.row][this.responsibleIndex.column].value},createEvent(){let t={headers:{"x-access-token":this.$store.state.token}};this.structure.rows.forEach(e=>{e.forEach(e=>{"corrections"!==e.fieldType&&"actions"!==e.fieldType||e.value.forEach(e=>{this.isActivityInformationCompleted(e)&&!e.eventCreated&&c.a.get(h["b"]+"/api/users/"+e.responsable.value,t).then(s=>{const a={summary:e.name,description:"",startDate:new Date(Date.now()),endDate:e.proposedDate,location:"Bolivia",attendees:[{email:s.data.email}]};c.a.post(h["b"]+"/api/calendar-events/add-event",a,t).then(t=>{e.eventCreated=!0,this.snackbar=!0,this.textMessage="Se han notificado correctamente a los usuarios",console.log(t)}).catch(t=>{console.log(t)})}).catch(t=>{console.log(t)})})})})},isActivityInformationCompleted(t){return""!==t.name&&""!==t.responsable&&""!==t.proposedDate}}},$t=xt,wt=s("99d9"),Ct=s("490a"),Tt=s("2db4"),At=Object(p["a"])($t,a,i,!1,null,null,null);e["default"]=At.exports;v()(At,{VBtn:b["a"],VCard:f["a"],VCardActions:wt["a"],VCol:g["a"],VContainer:k["a"],VProgressCircular:Ct["a"],VRow:x["a"],VSnackbar:Tt["a"],VTextarea:pt["a"]})},c3f0:function(t,e,s){"use strict";var a=s("80d2");const i=t=>{const{touchstartX:e,touchendX:s,touchstartY:a,touchendY:i}=t,n=.5,r=16;t.offsetX=s-e,t.offsetY=i-a,Math.abs(t.offsetY)<n*Math.abs(t.offsetX)&&(t.left&&s<e-r&&t.left(t),t.right&&s>e+r&&t.right(t)),Math.abs(t.offsetX)<n*Math.abs(t.offsetY)&&(t.up&&i<a-r&&t.up(t),t.down&&i>a+r&&t.down(t))};function n(t,e){const s=t.changedTouches[0];e.touchstartX=s.clientX,e.touchstartY=s.clientY,e.start&&e.start(Object.assign(t,e))}function r(t,e){const s=t.changedTouches[0];e.touchendX=s.clientX,e.touchendY=s.clientY,e.end&&e.end(Object.assign(t,e)),i(e)}function o(t,e){const s=t.changedTouches[0];e.touchmoveX=s.clientX,e.touchmoveY=s.clientY,e.move&&e.move(Object.assign(t,e))}function l(t){const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:t=>n(t,e),touchend:t=>r(t,e),touchmove:t=>o(t,e)}}function c(t,e,s){const i=e.value,n=i.parent?t.parentElement:t,r=i.options||{passive:!0};if(!n)return;const o=l(e.value);n._touchHandlers=Object(n._touchHandlers),n._touchHandlers[s.context._uid]=o,Object(a["x"])(o).forEach(t=>{n.addEventListener(t,o[t],r)})}function h(t,e,s){const i=e.value.parent?t.parentElement:t;if(!i||!i._touchHandlers)return;const n=i._touchHandlers[s.context._uid];Object(a["x"])(n).forEach(t=>{i.removeEventListener(t,n[t])}),delete i._touchHandlers[s.context._uid]}const u={inserted:c,unbind:h};e["a"]=u},c982:function(t,e,s){},ca71:function(t,e,s){},d951:function(t,e,s){},e53c:function(t,e,s){}}]);
//# sourceMappingURL=chunk-26edd3d8.90648225.js.map