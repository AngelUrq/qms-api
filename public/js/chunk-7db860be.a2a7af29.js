(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7db860be"],{"1f4f":function(t,e,a){"use strict";a("8b37");var i=a("80d2"),s=a("7560"),o=a("58df");e["a"]=Object(o["a"])(s["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes(){return{"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,...this.themeClasses}}},methods:{genWrapper(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(i["f"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},"556e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[a("v-card",[a("div",[a("v-col",{attrs:{cols:"12"}},[a("v-card",{staticClass:"white--text",attrs:{extended:"",color:"light-blue darken-4"}},[a("v-row",{staticClass:"pa-5"},[a("v-col",[a("h2",[t._v("Editor de formatos")])]),a("v-col",{attrs:{md:"1"}},[a("v-btn",{staticClass:"ma-2 blue lighten-1",attrs:{outlined:"",large:"",fab:"",color:"white"},on:{click:function(e){return t.createNewRow()}}},[a("v-icon",[t._v("mdi-table-row-plus-after")])],1)],1),a("v-col",{attrs:{md:"1"}},[a("v-btn",{staticClass:"ma-2 blue lighten-1",attrs:{outlined:"",large:"",fab:"",color:"white"},on:{click:function(e){return t.saveFormat()}}},[a("v-icon",[t._v("mdi-content-save")])],1)],1)],1)],1)],1)],1),t._l(this.actionPlanFormat.structure.rows,(function(e,i){return a("v-row",{key:i},[t._l(e,(function(e,s){return a("v-col",{key:s},[a("v-row",[a("v-col",[a(e.type,{ref:e.id,refInFor:!0,tag:"component",attrs:{mainTitle:e.mainTitle,idCol:s,idRow:i,newTitle:e.name}})],1),a("v-btn",{staticClass:"pa-2",attrs:{outlined:"",fab:"","x-small":"",color:"light-blue darken-4"},on:{click:function(e){return t.deleteTable(s,i)}}},[a("v-icon",[t._v("mdi-delete")])],1)],1)],1)})),0==e.length?a("v-spacer"):t._e(),a("v-col",{attrs:{md:"1"}},[a("v-row",[t.IsFreeForTable(e)?a("FormatOptions",{attrs:{idRow:i,availableTable:t.getAvailableTables()},on:{createTableId:t.createTableId,deleteTable:t.deleteTable}}):t._e()],1),a("v-row",[a("v-btn",{staticClass:"mr-2 mb-2 ml-4",attrs:{outlined:"",fab:"","x-small":"",color:"light-blue darken-4"},on:{click:function(e){return t.deleteRow(i)}}},[a("v-icon",[t._v("mdi-delete")])],1)],1),a("v-row",[a("v-btn",{staticClass:"mr-2 mb-2 ml-4",attrs:{outlined:"",fab:"","x-small":"",color:"light-blue darken-4"},on:{click:function(e){return t.createInnerRow(i)}}},[a("v-icon",[t._v("mdi-table-row-plus-after")])],1)],1)],1)],2)}))],2)],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-btn",{staticClass:"mr-4 mb-2 ml-7",attrs:{outlined:"",fab:"","x-small":"",color:"light-blue darken-4"},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[a("v-icon",[t._v("mdi-plus")])],1),a("v-dialog",{attrs:{"max-width":"50%"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",[t._v("Seleccione el formato de tabla que desea añadir")])]),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":"",align:"center",justify:"center"}},t._l(t.newButtons,(function(e){return a("v-tooltip",{key:e.id,attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[e.isVisible?a("v-btn",t._g({staticClass:"mr-4 mb-2 ml-7",attrs:{outlined:"",fab:"","x-small":"",color:"light-blue darken-4"},on:{click:function(a){return a.stopPropagation(),t.sendTableId(e.id)}}},s),[a("v-icon",[t._v(t._s(e.type))])],1):t._e()]}}],null,!0)},[a("span",[t._v(t._s(e.span))])])})),1)],1)],1)],1)],1)},l=[],n={mounted(){this.updateButtons()},data(){return{dialog:!1,buttonsIncons:[{type:"mdi-plus",id:1,isVisible:!0,span:"Campo vertical"},{type:"mdi-credit-card-outline",id:2,isVisible:!0,span:"Campo horizontal"},{type:"mdi-table-row",id:3,isVisible:!0,span:"Tabla de responsables"},{type:"mdi-crop-landscape",id:4,isVisible:!0,span:"Titulo"},{type:"mdi-table-settings",id:5,isVisible:!0,span:"Tabla de correcciones"},{type:"mdi-table-settings",id:6,isVisible:!0,span:"Tabla de actividades"}]}},props:{idRow:{type:Number},availableTable:{}},methods:{sendTableId(t){this.$emit("createTableId",t,this.idRow),this.dialog=!1},updateButtons(){for(var t=0;t<this.buttonsIncons.length;t++)3!==this.buttonsIncons[t].id||this.availableTable.table3Row||(this.buttonsIncons[t].isVisible=!1),6!==this.buttonsIncons[t].id||this.availableTable.table5RowsRoot||(this.buttonsIncons[t].isVisible=!1),5!==this.buttonsIncons[t].id||this.availableTable.table5RowsCorrection||(this.buttonsIncons[t].isVisible=!1),this.availableTable.table1Row||2===this.buttonsIncons[t].id||(this.buttonsIncons[t].isVisible=!1)}},computed:{newButtons(){return this.updateButtons(),this.buttonsIncons}}},r=n,c=a("2877"),d=a("6544"),u=a.n(d),h=a("8336"),b=a("b0af"),p=a("99d9"),f=a("169a"),v=a("132d"),m=a("0fd9"),g=(a("9734"),a("4ad4")),w=a("a9ad"),T=a("16b7"),y=a("b848"),C=a("75eb"),x=a("f573"),_=a("f2e7"),R=a("80d2"),k=a("d9bd"),I=a("58df"),V=Object(I["a"])(w["a"],T["a"],y["a"],C["a"],x["a"],_["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,fixed:{type:Boolean,default:!0},openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String,zIndex:{default:null}},data:()=>({calculatedMinWidth:0,closeDependents:!1}),computed:{calculatedLeft(){const{activator:t,content:e}=this.dimensions,a=!this.bottom&&!this.left&&!this.top&&!this.right,i=!1!==this.attach?t.offsetLeft:t.left;let s=0;return this.top||this.bottom||a?s=i+t.width/2-e.width/2:(this.left||this.right)&&(s=i+(this.right?t.width:-e.width)+(this.right?10:-10)),this.nudgeLeft&&(s-=parseInt(this.nudgeLeft)),this.nudgeRight&&(s+=parseInt(this.nudgeRight)),`${this.calcXOverflow(s,this.dimensions.content.width)}px`},calculatedTop(){const{activator:t,content:e}=this.dimensions,a=!1!==this.attach?t.offsetTop:t.top;let i=0;return this.top||this.bottom?i=a+(this.bottom?t.height:-e.height)+(this.bottom?10:-10):(this.left||this.right)&&(i=a+t.height/2-e.height/2),this.nudgeTop&&(i-=parseInt(this.nudgeTop)),this.nudgeBottom&&(i+=parseInt(this.nudgeBottom)),`${this.calcYOverflow(i+this.pageYOffset)}px`},classes(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left}},computedTransition(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY(){return this.top||this.bottom},offsetX(){return this.left||this.right},styles(){return{left:this.calculatedLeft,maxWidth:Object(R["f"])(this.maxWidth),minWidth:Object(R["f"])(this.minWidth),opacity:this.isActive?.9:0,top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount(){this.$nextTick(()=>{this.value&&this.callActivate()})},mounted(){"v-slot"===Object(R["s"])(this,"activator",!0)&&Object(k["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate(){this.runDelay("close")},genActivatorListeners(){const t=g["a"].options.methods.genActivatorListeners.call(this);return t.focus=t=>{this.getActivator(t),this.runDelay("open")},t.blur=t=>{this.getActivator(t),this.runDelay("close")},t.keydown=t=>{t.keyCode===R["w"].esc&&(this.getActivator(t),this.runDelay("close"))},t}},render(t){const e=t("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:{[this.contentClass]:!0,menuable__content__active:this.isActive,"v-tooltip__content--fixed":this.activatorFixed},style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.showLazyContent(this.getContentSlot()));return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[t("transition",{props:{name:this.computedTransition}},[e]),this.genActivator()])}}),F=Object(c["a"])(r,o,l,!1,null,null,null),$=F.exports;u()(F,{VBtn:h["a"],VCard:b["a"],VCardActions:p["a"],VCardTitle:p["c"],VDialog:f["a"],VIcon:v["a"],VRow:m["a"],VTooltip:V});var O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{outlined:""}},[a("v-col",[a("v-text-field",{attrs:{label:"Titulo",placeholder:t.title},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("div",{staticClass:"text-left ml-2"},[t._v(t._s(t.body))])],1)},S=[],P={props:{newTitle:String},data(){return{title:"Verificacion de la eficacia",body:"Description"}},mounted(){void 0!==this.newTitle&&(this.title=this.newTitle)}},j=P,A=a("62ad"),E=a("8654"),B=Object(c["a"])(j,O,S,!1,null,null,null),D=B.exports;u()(B,{VCard:b["a"],VCol:A["a"],VTextField:E["a"]});var L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",[a("v-text-field",{attrs:{label:"Titulo",placeholder:t.title},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("v-col",{staticClass:"ml-1"},[a("v-text-field",{attrs:{placeholder:t.body,readonly:""},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1)],1)],1)},N=[],z={props:{newTitle:String},data(){return{title:"Título",body:"Valor"}},mounted(){void 0!==this.newTitle&&(this.title=this.newTitle)}},W=z,M=a("a523"),q=Object(c["a"])(W,L,N,!1,null,null,null),H=q.exports;u()(q,{VCol:A["a"],VContainer:M["a"],VRow:m["a"],VTextField:E["a"]});var Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-col",[a("v-text-field",{attrs:{label:"Outlined","single-line":"",outlined:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)},J=[],X={props:{newTitle:String},data(){return{title:"Titulo"}},mounted(){void 0!==this.newTitle&&(this.title=this.newTitle)}},Z=X,G=Object(c["a"])(Z,Y,J,!1,null,null,null),K=G.exports;u()(G,{VCol:A["a"],VTextField:E["a"]});var Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"text-center white--text py-2",attrs:{color:"light-blue darken-4"}},[t._v(" "+t._s(t.mainTitle))]),a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",t._l(t.titles,(function(e,i){return a("th",{key:i,staticClass:"text-left"},[a("v-col",[t._v("\r\n              "+t._s(e)+"\r\n              ")])],1)})),0)]),a("tbody",[a("tr")])]},proxy:!0}])})],1)},U=[],tt={props:["mainTitle"],data(){return{titles:["Actividad","Responsable","VoBo Responsable","Fecha Propuesta","Fecha Real"]}}},et=tt,at=a("1f4f"),it=Object(c["a"])(et,Q,U,!1,null,null,null),st=it.exports;u()(it,{VCard:b["a"],VCol:A["a"],VSimpleTable:at["a"]});var ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"text-center white--text py-2",attrs:{color:"light-blue darken-4"}},[t._v("Responsable de seguimiento")]),a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",t._l(t.titles,(function(e,i){return a("th",{key:i,staticClass:"text-left"},[a("v-col",[t._v("\r\n              "+t._s(e)+"\r\n              ")])],1)})),0)]),a("tbody",[a("tr")])]},proxy:!0}])})],1)},lt=[],nt={data(){return{titles:["Nombre","Puesto","Firma"]}}},rt=nt,ct=Object(c["a"])(rt,ot,lt,!1,null,null,null),dt=ct.exports;u()(ct,{VCard:b["a"],VCol:A["a"],VSimpleTable:at["a"]});var ut=a("f601"),ht=a("bc3a"),bt=a.n(ht),pt={components:{FormatOptions:$,Table1Row:D,SimpleRow:H,Label:K,Table5Rows:st,Table3Rows:dt},data(){return{largeTables:["Label","Table3Rows","Table5Rows","Table1Row"],actualColId:0,actionPlanFormat:{id:1,name:"test",creationDate:20.18,lastModificationDate:10.075,structure:{}}}},methods:{createNewRow:function(){this.actionPlanFormat.structure.rows.push([])},createTableId:function(t,e){switch(t){case 1:this.actionPlanFormat.structure.rows[e].push({id:this.getIdCol(),name:"Observación",fieldType:"vertical",type:"Table1Row",value:""}),console.log(this.actionPlanFormat.structure.rows);break;case 2:this.actionPlanFormat.structure.rows[e].push({id:this.getIdCol(),name:"Observación",fieldType:"horizontal",type:"SimpleRow",value:""});break;case 3:this.actionPlanFormat.structure.rows[e].push({id:this.getIdCol(),name:"Observación",fieldType:"responsible",type:"Table3Rows",value:[]});break;case 4:this.actionPlanFormat.structure.rows[e].push({id:this.getIdCol(),name:"Observación",fieldType:"title",type:"Label",value:""});break;case 5:this.actionPlanFormat.structure.rows[e].push({id:this.getIdCol(),name:"Observación",fieldType:"corrections",type:"Table5Rows",mainTitle:"Corrección inmediata",value:[]});break;case 6:this.actionPlanFormat.structure.rows[e].push({id:this.getIdCol(),name:"Observación",fieldType:"actions",type:"Table5Rows",mainTitle:"Acciones para eliminar la causa raiz",value:[]});break;default:break}},deleteTable:function(t,e){this.$delete(this.actionPlanFormat.structure.rows[e],t)},deleteRow:function(t){this.$delete(this.actionPlanFormat.structure.rows,t)},createInnerRow:function(t){this.actionPlanFormat.structure.rows.splice(t+1,0,[])},IsFreeForTable(t){var e=!0;return t.forEach(t=>{this.largeTables.includes(t.type)&&(e=!1)}),e},getAvailableTables(){let t={table3Row:!0,table5RowsRoot:!0,table5RowsCorrection:!0,table1Row:!0};return this.actionPlanFormat.structure.rows.forEach(e=>{e.forEach(a=>{"Table3Rows"===a.type?t.table3Row=!1:"Table5Rows"===a.type&&"Corrección inmediata"===a.mainTitle?t.table5RowsCorrection=!1:"Table5Rows"===a.type&&"Acciones para eliminar la causa raiz"===a.mainTitle?t.table5RowsRoot=!1:"SimpleRow"===a.type&&1===e.length&&(t.table1Row=!1)})}),t},saveFormat(){this.updateTitle(),this.actionPlanFormat.structure.lastModificationDate=new Date;const t={"x-access-token":this.$store.state.token};bt.a.put(ut["b"]+"/api/action-plan-formats/"+this.$router.currentRoute.query.id,this.actionPlanFormat,{headers:t})},updateTitle(){Object.keys(this.$refs).forEach(t=>{if(void 0!==this.$refs[t][0]){const e=this.$refs[t][0].$attrs.idRow,a=this.$refs[t][0].$attrs.idCol;void 0!==this.$refs[t][0].$data.title&&(this.actionPlanFormat.structure.rows[e][a].name=this.$refs[t][0].$data.title)}})},getIdCol(){return this.actionPlanFormat.structure.rows.forEach(t=>{t.forEach(t=>{this.actualColId+=1})}),this.actualColId+1},getFormatData(){const t={"x-access-token":this.$store.state.token};bt.a.get(ut["b"]+"/api/action-plan-formats/"+this.$router.currentRoute.query.id,{headers:t}).then(t=>{this.actionPlanFormat=t.data,void 0===this.actionPlanFormat.structure.rows&&(this.actionPlanFormat.structure={rows:[[]]});let e=0;this.actionPlanFormat.structure.rows.forEach(t=>{t.forEach(t=>{e+=1})}),this.actualColId=e})}},beforeMount(){this.getFormatData()}},ft=pt,vt=a("2fa4"),mt=Object(c["a"])(ft,i,s,!1,null,null,null);e["default"]=mt.exports;u()(mt,{VBtn:h["a"],VCard:b["a"],VCol:A["a"],VContainer:M["a"],VIcon:v["a"],VRow:m["a"],VSpacer:vt["a"]})},"62ad":function(t,e,a){"use strict";a("4b85");var i=a("2b0e"),s=a("d9f7"),o=a("80d2");const l=["sm","md","lg","xl"],n=(()=>{return l.reduce((t,e)=>{return t[e]={type:[Boolean,String,Number],default:!1},t},{})})(),r=(()=>{return l.reduce((t,e)=>{return t["offset"+Object(o["C"])(e)]={type:[String,Number],default:null},t},{})})(),c=(()=>{return l.reduce((t,e)=>{return t["order"+Object(o["C"])(e)]={type:[String,Number],default:null},t},{})})(),d={col:Object.keys(n),offset:Object.keys(r),order:Object.keys(c)};function u(t,e,a){let i=t;if(null!=a&&!1!==a){if(e){const a=e.replace(t,"");i+=`-${a}`}return"col"!==t||""!==a&&!0!==a?(i+=`-${a}`,i.toLowerCase()):i.toLowerCase()}}const h=new Map;e["a"]=i["a"].extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...n,offset:{type:[String,Number],default:null},...r,order:{type:[String,Number],default:null},...c,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:a,children:i,parent:o}){let l="";for(const s in e)l+=String(e[s]);let n=h.get(l);if(!n){let t;for(t in n=[],d)d[t].forEach(a=>{const i=e[a],s=u(t,a,i);s&&n.push(s)});const a=n.some(t=>t.startsWith("col-"));n.push({col:!a||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),h.set(l,n)}return t(e.tag,Object(s["a"])(a,{class:n}),i)}})},"8b37":function(t,e,a){},9734:function(t,e,a){}}]);
//# sourceMappingURL=chunk-7db860be.a2a7af29.js.map