(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08202def","chunk-2d20f762"],{"17b3":function(e,t,s){},8418:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[s("material-card",{staticClass:"card-tabs",attrs:{color:"pink darken-3"},scopedSlots:e._u([{key:"header",fn:function(){return[s("span",{staticClass:"subheading font-weight-light mx-5",staticStyle:{"align-self":"center","font-size":"150%"}},[e._v("Usuarios")]),s("v-container",[s("v-row",{staticClass:"mx-5",attrs:{justify:"end"}},[s("RegisterUser")],1)],1)]},proxy:!0}])},[s("v-card-title",{staticClass:"mb-5"},[s("v-spacer"),s("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),s("v-spacer")],1),s("v-data-table",{ref:"table",staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,page:e.page,search:e.search,"items-per-page":10,"hide-default-footer":""},on:{"update:page":function(t){e.page=t},"page-count":function(t){e.pageCount=t}},scopedSlots:e._u([{key:"item.action",fn:function(t){return[s("v-btn",{attrs:{color:"blue-grey lighten-1",icon:"",text:"","x-small":""},on:{click:function(s){return e.openEditUser(t.item)}}},[s("v-icon",[e._v("mdi-account-edit")])],1),s("EditUser",{model:{value:e.showEditUser,callback:function(t){e.showEditUser=t},expression:"showEditUser"}}),[s("v-dialog",{attrs:{persistent:"","max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({staticClass:"mr-1",attrs:{color:"blue-grey lighten-1",icon:"","x-small":"",text:""}},a),[s("v-icon",[e._v("mdi-delete")])],1)]}}],null,!0),model:{value:e.ConfirmDialog,callback:function(t){e.ConfirmDialog=t},expression:"ConfirmDialog"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Eliminar")]),s("v-card-text",[e._v("¿Estás seguro de que quieres eliminar este usuario?")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"pink lighten-3",text:""},on:{click:function(s){return e.deleteUser(t.item)}}},[e._v("Eliminar")]),s("v-btn",{attrs:{color:"pink lighten-3",text:""},on:{click:function(t){e.ConfirmDialog=!1}}},[e._v("Cancelar")])],1)],1)],1)]]}}])}),s("div",{staticClass:"text-center pt-2"},[s("v-pagination",{attrs:{color:"pink lighten-2",length:e.pageCount},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1),s("ChangePassword")],1)},i=[],r=s("56d7"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{scrollable:"",width:"70%"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({staticClass:"pink lighten-3 lighten-1 white--text text--lighten-1",attrs:{dark:"",fab:""}},a),[s("v-icon",[e._v("mdi-plus")])],1)]}}]),model:{value:e.dialogRegister,callback:function(t){e.dialogRegister=t},expression:"dialogRegister"}},[s("v-card",[s("v-card-title",[e._v("Registrar usuario")]),s("v-card-text",[s("v-form",{ref:"form"},[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",sm:"10",md:"5"}},[s("v-text-field",{attrs:{color:"blue",rules:e.codeRules,label:"Codigo*",required:""},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}})],1),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-select",{attrs:{items:["Admin","Usuario"],label:"Rol*",rules:[function(e){return!!e||"Se debe escojer un rol"}],required:"",color:"blue"},model:{value:e.user.role,callback:function(t){e.$set(e.user,"role",t)},expression:"user.role"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{attrs:{color:"blue",rules:[function(e){return!!e||"El nombre es necesario"}],label:"Nombre*",required:""},model:{value:e.user.firstName,callback:function(t){e.$set(e.user,"firstName",t)},expression:"user.firstName"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{attrs:{color:"blue",rules:[function(e){return!!e||"El apellido paterno es necesario"}],label:"Apellido paterno*"},model:{value:e.user.paternalLastName,callback:function(t){e.$set(e.user,"paternalLastName",t)},expression:"user.paternalLastName"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{attrs:{color:"blue",rules:[function(e){return!!e||"El apellido materno es necesario"}],label:"Apellido materno*"},model:{value:e.user.maternalLastName,callback:function(t){e.$set(e.user,"maternalLastName",t)},expression:"user.maternalLastName"}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{color:"blue",rules:e.emailRules,label:"Correo*",required:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{valuePass:"myPass",label:"Contraseña",rules:e.passwordRules,"append-icon":e.valuePass?"mdi-eye":"mdi-eye-off",type:e.valuePass?"password":"text",color:"blue"},on:{"click:append":function(){return e.valuePass=!e.valuePass}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-select",{attrs:{items:["Cochabamba","La Paz","Santa Cruz"],label:"Ciudad*",rules:[function(e){return!!e||"Se debe escoger una ciudad"}],required:"",color:"blue","prepend-icon":"mdi-map-marker"},model:{value:e.user.city,callback:function(t){e.$set(e.user,"city",t)},expression:"user.city"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[s("v-text-field",{attrs:{"prepend-icon":"mdi-cellphone",color:"blue",rules:e.phoneRules,label:"Celular/Telefono*"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),s("v-col",{attrs:{cols:"12",md:"12"}},[s("v-textarea",{attrs:{outlined:"",label:"Notas",color:"blue"},model:{value:e.user.notes,callback:function(t){e.$set(e.user,"notes",t)},expression:"user.notes"}})],1)],1)],1)],1)],1),s("v-card-actions",[s("v-alert",{attrs:{value:e.warningAlert,type:"warning"}},[e._v("\n        Algunos campos están vacios\n      ")]),s("v-alert",{attrs:{value:e.successAlert,type:"success"}},[e._v("\n        ¡Registrado!\n      ")]),s("div",{staticClass:"flex-grow-1"}),s("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"pink lighten-3",text:""},on:{click:function(t){return t.stopPropagation(),e.register(t)}}},[e._v("Registrar\n      ")]),s("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"pink lighten-3",text:""},on:{click:function(t){e.dialogRegister=!1,e.clearFields()}}},[e._v("Salir\n      ")])],1)],1)],1)},n=[],o=s("bc3a"),c=s.n(o),d=s("f601"),u={data(){return{backendURL:"",dialogRegister:"",valuePass:String,warningAlert:!1,successAlert:!1,emailRules:[e=>!!e||"Correo es necesario",e=>/.+@.+\..+/.test(e)||"Correo debe ser valido"],phoneRules:[e=>!!e||"Número celular/Teléfono es necesario",e=>/^\d+$/.test(e)||"Nñumero debe ser valido"],codeRules:[e=>!!e||"Codigo es necesario",e=>/^\d+$/.test(e)||"Código debe ser valido"],passwordRules:[e=>!!e||"Contraseña es necesaria",e=>e.length>=5||"Contraseña debe ser más de 5 caracteres"],user:{code:"",role:"",firstName:"",paternalLastName:"",maternalLastName:"",email:"",password:"",city:"",phone:"",notes:"",lastLogIn:"now"}}},mounted:function(){this.backendURL=d["b"]},methods:{sendMailNotification(){const e=`\n        <p>¡Hola ${this.user.firstName}!</p>\n        <p>Tu nueva cuenta ha sido creada.</p>\n        <h3>¡Ingresa ahora!</h3>\n        <p>Entra al siguiente enlace ${this.backendURL} e inicia sesión. </p>\n      `;let t={from:"<UPBgestiondecalidad@gmail.com>",to:this.user.email,subject:"UPB Gestión de calidad: Nuevo usuario",text:"",html:e},s={headers:{"x-access-token":this.$store.state.token}};c.a.post(d["b"]+"/api/mail/send",t,s).then(e=>{console.log(e)}).catch(e=>{console.log(e)})},sendNotification(){let e={email:this.user.email,type:"Success",message:"Bienvenido a tu nueva cuenta, "+this.user.firstName+"!"},t={headers:{"x-access-token":this.$store.state.token}};c.a.post(d["b"]+"/api/notifications/add",e,t).then(e=>{console.log(e)}).catch(e=>{console.log(e)})},registerUserAPI(){let e={code:this.user.code,password:this.user.password,firstNames:this.user.firstName,paternalLastName:this.user.paternalLastName,maternalLastName:this.user.maternalLastName,email:this.user.email,city:this.user.city,phone:this.user.phone,notes:this.user.notes,role:this.user.role,lastLogIn:this.user.lastLogIn};c.a.post(d["b"]+"/api/users/signup",e).then(e=>{console.log(e),r["EventBus"].$emit("refreshTable","getUsers")}).catch(e=>{console.log(e)})},register(){this.$refs.form.validate()?(this.registerUserAPI(),this.sendMailNotification(),this.sendNotification(),this.clearFields(),this.successAlert=!0,setTimeout(()=>{this.successAlert=!1},1e4)):(this.warningAlert=!0,setTimeout(()=>{this.warningAlert=!1},1e4))},clearFields(){this.user.code="",this.user.role="",this.user.firstName="",this.user.paternalLastName="",this.user.maternalLastName="",this.user.email="",this.user.password="",this.user.city="",this.user.phone="",this.user.notes="",this.$refs.form.resetValidation()}}},m=u,h=s("2877"),v=s("6544"),g=s.n(v),p=s("0798"),f=s("8336"),b=s("b0af"),x=s("99d9"),C=s("62ad"),w=s("a523"),k=s("169a"),U=s("4bd4"),_=s("132d"),E=s("0fd9"),A=s("b974"),N=s("8654"),$=s("a844"),y=Object(h["a"])(m,l,n,!1,null,null,null),V=y.exports;g()(y,{VAlert:p["a"],VBtn:f["a"],VCard:b["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VCol:C["a"],VContainer:w["a"],VDialog:k["a"],VForm:U["a"],VIcon:_["a"],VRow:E["a"],VSelect:A["a"],VTextField:N["a"],VTextarea:$["a"]});var P=s("b471"),R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{width:"70%"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("v-card",[s("v-card-title",[e._v("Editar usuario")]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",sm:"10",md:"5"}},[s("v-text-field",{attrs:{color:"blue",label:"Codigo*",required:""},model:{value:e.EditUser.code,callback:function(t){e.$set(e.EditUser,"code",t)},expression:"EditUser.code"}})],1),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-select",{attrs:{items:["Admin","Usuario"],label:"Rol*",required:"",color:"blue"},model:{value:e.EditUser.role,callback:function(t){e.$set(e.EditUser,"role",t)},expression:"EditUser.role"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{attrs:{color:"blue",label:"Nombre*",required:""},model:{value:e.EditUser.firstNames,callback:function(t){e.$set(e.EditUser,"firstNames",t)},expression:"EditUser.firstNames"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{attrs:{color:"blue",label:"Apellido Paterno*"},model:{value:e.EditUser.paternalLastName,callback:function(t){e.$set(e.EditUser,"paternalLastName",t)},expression:"EditUser.paternalLastName"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{attrs:{color:"blue",label:"Apellido Materno*"},model:{value:e.EditUser.maternalLastName,callback:function(t){e.$set(e.EditUser,"maternalLastName",t)},expression:"EditUser.maternalLastName"}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{color:"blue",label:"Correo*",required:""},model:{value:e.EditUser.email,callback:function(t){e.$set(e.EditUser,"email",t)},expression:"EditUser.email"}})],1),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-select",{attrs:{items:["Cochabamba","La Paz"],label:"Ciudad*",required:"",color:"blue","prepend-icon":"mdi-map-marker"},model:{value:e.EditUser.city,callback:function(t){e.$set(e.EditUser,"city",t)},expression:"EditUser.city"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[s("v-text-field",{attrs:{"prepend-icon":"mdi-cellphone",color:"blue",label:"Celular/Telefono*"},model:{value:e.EditUser.phone,callback:function(t){e.$set(e.EditUser,"phone",t)},expression:"EditUser.phone"}})],1),s("v-col",{attrs:{cols:"12",md:"12"}},[s("v-textarea",{attrs:{outlined:"",label:"Notas",color:"blue"},model:{value:e.EditUser.notes,callback:function(t){e.$set(e.EditUser,"notes",t)},expression:"EditUser.notes"}})],1)],1)],1)],1),s("v-card-actions",[s("div",{staticClass:"flex-grow-1"}),s("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"pink lighten-3",small:"",text:""},on:{click:function(t){return e.saveUser()}}},[e._v("Guardar")]),s("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"pink lighten-3",small:"",text:""},on:{click:function(t){return e.closeDialog()}}},[e._v("Cancelar")])],1)],1)],1)},L=[],T={props:{value:Boolean},data(){return{valuePass:String,userid:"",EditUser:{code:"",role:"",firstNames:"",paternalLastName:"",maternalLastName:"",email:"",password:"",city:"",phone:"",notes:""}}},computed:{show:{get(){return this.value},set(){this.$emit("input",!1)}}},created(){r["EventBus"].$on("editUserInfo",e=>{this.EditUser=Object.assign({},e),this.EditUser.password="",this.userid=e._id})},methods:{saveUser(){let e={headers:{"x-access-token":this.$store.state.token}};c.a.put(d["b"]+"/api/users/"+this.userid,{code:this.EditUser.code,firstNames:this.EditUser.firstNames,paternalLastName:this.EditUser.paternalLastName,maternalLastName:this.EditUser.maternalLastName,email:this.EditUser.email,city:this.EditUser.city,phone:this.EditUser.phone,notes:this.EditUser.notes,role:this.EditUser.role},e).then(e=>{r["EventBus"].$emit("refreshTable","getUsers"),this.$emit("input",!1)}).catch(e=>{console.log(e)})},closeDialog(){this.$emit("input",!1)}}},I=T,B=Object(h["a"])(I,R,L,!1,null,null,null),S=B.exports;g()(B,{VBtn:f["a"],VCard:b["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VCol:C["a"],VContainer:w["a"],VDialog:k["a"],VRow:E["a"],VSelect:A["a"],VTextField:N["a"],VTextarea:$["a"]});var D={components:{RegisterUser:V,EditUser:S,ChangePassword:P["default"]},data(){return{showEditUser:!1,ConfirmDialog:"",page:1,pageCount:0,dialog:"",users:[],search:"",headers:[{sortable:!0,text:"Código",value:"code"},{sortable:!1,text:"Rol",value:"role"},{sortable:!1,text:"Nombre",value:"firstNames"},{sortable:!1,text:"Apellido Paterno",value:"paternalLastName",align:"right"},{sortable:!1,text:"Apellido Materno",value:"maternalLastName",align:"right"},{sortable:!1,text:"Correo",value:"email",align:"right"},{sortable:!1,text:"Ciudad",value:"city",align:"right"},{sortable:!1,text:"Celular",value:"phone",align:"right"},{sortable:!1,text:"Notas",value:"notes",align:"right"},{sortable:!1,text:"Acciones",value:"action",align:"right"}]}},mounted(){this.getUsers()},created(){r["EventBus"].$on("refreshTable",e=>{this.getUsers()})},methods:{getUsers(){let e={headers:{"x-access-token":this.$store.state.token}};c.a.get(d["b"]+"/api/users",e).then(e=>{this.users=e.data}).catch(e=>{console.log(e)})},deleteUser(e){let t={headers:{"x-access-token":this.$store.state.token}};c.a.delete(d["b"]+"/api/users/"+e._id,t).then(e=>{this.getUsers(),this.ConfirmDialog=!1}).catch(e=>{console.log(e)})},openEditUser(e){this.showEditUser=!0,r["EventBus"].$emit("editUserInfo",e)}}},q=D,F=s("8fea"),z=s("891e"),j=s("2fa4"),G=Object(h["a"])(q,a,i,!1,null,null,null);t["default"]=G.exports;g()(G,{VBtn:f["a"],VCard:b["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VContainer:w["a"],VDataTable:F["a"],VDialog:k["a"],VIcon:_["a"],VPagination:z["a"],VRow:E["a"],VSpacer:j["a"],VTextField:N["a"]})},"891e":function(e,t,s){"use strict";s("17b3");var a=s("9d26"),i=s("dc22"),r=s("58df"),l=s("a9ad"),n=s("7560");t["a"]=Object(r["a"])(l["a"],n["a"]).extend({name:"v-pagination",directives:{Resize:i["a"]},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:e=>e%1===0},nextIcon:{type:String,default:"$vuetify.icons.next"},prevIcon:{type:String,default:"$vuetify.icons.prev"},totalVisible:[Number,String],value:{type:Number,default:0}},data(){return{maxButtons:0,selected:null}},computed:{classes(){return{"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled,...this.themeClasses}},items(){const e=parseInt(this.totalVisible,10),t=e>this.maxButtons?this.maxButtons:e||this.maxButtons;if(this.length<=t||t<1)return this.range(1,this.length);const s=t%2===0?1:0,a=Math.floor(t/2),i=this.length-a+1+s;if(this.value>a&&this.value<i){const e=this.value-a+2,t=this.value+a-2-s;return[1,"...",...this.range(e,t),"...",this.length]}if(this.value===a){const e=this.value+a-1-s;return[...this.range(1,e),"...",this.length]}if(this.value===i){const e=this.value-a+1;return[1,"...",...this.range(e,this.length)]}return[...this.range(1,a),"...",...this.range(i,this.length)]}},watch:{value(){this.init()}},mounted(){this.init()},methods:{init(){this.selected=null,this.$nextTick(this.onResize),setTimeout(()=>this.selected=this.value,100)},onResize(){const e=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((e-96)/42)},next(e){e.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous(e){e.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range(e,t){const s=[];e=e>0?e:1;for(let a=e;a<=t;a++)s.push(a);return s},genIcon(e,t,s,i){return e("li",[e("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":s},attrs:{type:"button"},on:s?{}:{click:i}},[e(a["a"],[t])])])},genItem(e,t){const s=t===this.value&&(this.color||"primary");return e("button",this.setBackgroundColor(s,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":t===this.value},attrs:{type:"button"},on:{click:()=>this.$emit("input",t)}}),[t.toString()])},genItems(e){return this.items.map((t,s)=>{return e("li",{key:s},[isNaN(Number(t))?e("span",{class:"v-pagination__more"},[t.toString()]):this.genItem(e,t)])})}},render(e){const t=[this.genIcon(e,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous),this.genItems(e),this.genIcon(e,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next)];return e("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},t)}})},b471:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{"max-width":"600"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({attrs:{color:"indigo darken-4","x-small":"",outlined:""}},a),[e._v("\n    Recordar\n    ")])]}}]),model:{value:e.dialogChangePass,callback:function(t){e.dialogChangePass=t},expression:"dialogChangePass"}},[s("v-card",[s("v-card-title",{staticClass:"indigo darken-4 lighten-1 white--text text--lighten-1",attrs:{"primary-title":""}},[e._v("\n      Recuperar Contraseña\n    ")]),s("v-card-text",[s("v-form",{ref:"form"},[s("v-card-text",{staticClass:"text--primary"},[e._v("Se enviara un correo con su codigo de verificacion")]),s("v-container",[s("v-text-field",{attrs:{color:"amber accent-4",rules:e.emailRules,label:"Correo*",required:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1)],1)],1),s("v-card-actions",[s("v-alert",{attrs:{value:e.warningAlert,type:"warning",dense:""}},[e._v("\n        El correo es invalido\n      ")]),s("v-alert",{attrs:{value:e.successAlert,type:"success",height:"50"}},[e._v("\n        Se envio el correo!\n      ")]),s("div",{staticClass:"flex-grow-1"}),s("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"indigo darken-4 lighten-1",text:""},on:{click:function(t){return t.stopPropagation(),e.send(t)}}},[e._v("Enviar\n      ")]),s("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"indigo darken-4 lighten-1",text:""},on:{click:function(t){e.dialogChangePass=!1,e.clearFields()}}},[e._v("Cancelar\n      ")])],1)],1),s("v-dialog",{attrs:{"max-width":"600"},model:{value:e.dialogConfirmCode,callback:function(t){e.dialogConfirmCode=t},expression:"dialogConfirmCode"}},[s("v-card",[s("v-card-title",{staticClass:"indigo darken-4 lighten-1 white--text text--lighten-1",attrs:{"primary-title":""}},[e._v("\n        Codigo de Verificacion\n        ")]),s("v-card-text",[s("v-form",{ref:"form2"},[s("v-card-text",{staticClass:"text--primary"},[e._v("Ingrese su codigo de verificacion")]),s("v-container",[s("v-text-field",{attrs:{color:"amber accent-4",label:"Codigo",required:""},model:{value:e.verificationCode,callback:function(t){e.verificationCode=t},expression:"verificationCode"}})],1)],1)],1),s("v-card-actions",[s("v-alert",{attrs:{value:e.warningAlert2,type:"warning",dense:""}},[e._v("\n        El codigo no es correcto\n      ")]),s("v-alert",{attrs:{value:e.successAlert2,type:"success",height:"50"}},[e._v("\n        Codigo correcto!\n      ")]),s("div",{staticClass:"flex-grow-1"}),s("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"indigo darken-4 lighten-1",text:""},on:{click:e.verifyCode}},[e._v("Verificar\n      ")]),s("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"indigo darken-4 lighten-1",text:""},on:{click:function(t){e.dialogConfirmCode=!1,e.clearFields()}}},[e._v("Cancelar\n      ")])],1)],1)],1),s("v-dialog",{attrs:{"max-width":"600"},model:{value:e.dialogUpdatePass,callback:function(t){e.dialogUpdatePass=t},expression:"dialogUpdatePass"}},[s("v-card",[s("v-card-title",{staticClass:"indigo darken-4 lighten-1 white--text text--lighten-1",attrs:{"primary-title":""}},[e._v("\n        Cambiar Contraseña\n        ")]),s("v-card-text",[s("v-form",{ref:"form2"},[s("v-card-text",{staticClass:"text--primary"},[e._v("Ingrese su nueva contraseña")]),s("v-container",[s("v-text-field",{attrs:{color:"amber accent-4",rules:e.passwordRules,label:"Nueva Contraseña",required:""},model:{value:e.newPass,callback:function(t){e.newPass=t},expression:"newPass"}}),s("v-text-field",{attrs:{color:"amber accent-4",label:"Confrimar Contraseña",required:""},model:{value:e.confirmPass,callback:function(t){e.confirmPass=t},expression:"confirmPass"}})],1)],1)],1),s("v-card-actions",[s("v-alert",{attrs:{value:e.warningAlert3_samePass,type:"warning",dense:""}},[e._v("\n        La contraseña no coincide\n      ")]),s("v-alert",{attrs:{value:e.warningAlert3_passRules,type:"warning",dense:""}},[e._v("\n        La contraseña no es valida\n      ")]),s("v-alert",{attrs:{value:e.successAlert3,type:"success",height:"50"}},[e._v("\n        Se actualizo la contraseña\n      ")]),s("div",{staticClass:"flex-grow-1"}),s("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"indigo darken-4 lighten-1",disabled:e.isDisabled,text:""},on:{click:e.updatePassword}},[e._v("Actualizar\n      ")]),s("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"indigo darken-4 lighten-1",text:""},on:{click:function(t){e.dialogUpdatePass=!1}}},[e._v("Regresar\n      ")])],1)],1)],1)],1)},i=[],r=s("bc3a"),l=s.n(r),n=s("f601"),o={data(){return{dialogChangePass:"",dialogConfirmCode:"",dialogUpdatePass:"",xsdaCodeGenerated:"",newPass:"",confirmPass:"",warningAlert:!1,warningAlert2:!1,warningAlert3_samePass:!1,warningAlert3_passRules:!1,successAlert:!1,successAlert2:!1,successAlert3:!1,isDisabled:!1,emailRules:[e=>!!e||"Correo es necesario",e=>/.+@.+\..+/.test(e)||"Correo debe ser valido"],passwordRules:[e=>!!e||"Contraseña es necesario",e=>e.length>=5||"Contraseña debe ser mas de 5 caracteres"],user:{email:""},verificationCode:""}},methods:{sendMailVerification(){this.xsdaCodeGenerated=this.generateCode(10);const e=`\n        <p>Hola!</p>\n        <p>Estas en proceso de cambiar tu contraseña</p>\n        <h3>Codigo de Verificacion</h3>\n        <ul>\n          <li> Tu codigo es: ${this.xsdaCodeGenerated}\n        </ul>\n        <p>Ingresa tu codigo para seguir con tu cambio de contraseña</p>\n      `;let t={from:'"Gestion de Calidad UPB" <UPBgestiondecalidad@gmail.com>',to:this.user.email,subject:"UPB Gestion de Calidad: Recuperar Contraseña",text:"",html:e};l.a.post(n["b"]+"/api/mail/send",t).then(e=>{console.log(e)}).catch(e=>{console.log(e)})},generateCode(e){let t="",s="abcdefghijklmnopqrstuvwxyz123456789ABCDEFGH";for(let a=0;a<e;a++)t+=s.charAt(Math.floor(Math.random()*s.length));return t},clearFields(){this.$refs.form.resetValidation()},send(){this.$refs.form.validate()?(this.sendMailVerification(),this.clearFields(),this.successAlert=!0,this.dialogConfirmCode=!0,this.dialogChangePass=!1,setTimeout(()=>{this.successAlert=!1},1e4)):(this.warningAlert=!0,setTimeout(()=>{this.warningAlert=!1},1e4))},verifyCode(){this.verificationCode===this.xsdaCodeGenerated?(this.warningAlert2=!1,this.successAlert2=!0,this.xsdaCodeGenerated="",this.dialogUpdatePass=!0,this.dialogConfirmCode=!1,setTimeout(()=>{this.successAlert2=!1},1e4)):(this.successAlert2=!1,this.warningAlert2=!0,setTimeout(()=>{this.warningAlert2=!1},1e4))},updatePassword(){this.$refs.form2.validate()?this.newPass===this.confirmPass?(this.warningAlert3_samePass=!1,this.warningAlert3_passRules=!1,l.a.put(n["b"]+"/api/password-reset/"+this.user.email,{password:this.confirmPass}).then(e=>{console.log(e)}).catch(e=>{console.log(e)}),this.$refs.form2.resetValidation(),this.warningAlert3_passRules=!1,this.warningAlert3_samePass=!1,this.successAlert3=!0,this.isDisabled=!0,setTimeout(()=>{this.successAlert3=!1},1e4),this.user.email="",this.newPass="",this.confirmPass=""):(this.successAlert3=!1,this.warningAlert3_passRules=!1,this.warningAlert3_samePass=!0,setTimeout(()=>{this.warningAlert3_samePass=!1},1e4)):(this.successAlert3=!1,this.warningAlert3_samePass=!1,this.warningAlert3_passRules=!0,setTimeout(()=>{this.warningAlert3_passRules=!1},1e4))}}},c=o,d=s("2877"),u=s("6544"),m=s.n(u),h=s("0798"),v=s("8336"),g=s("b0af"),p=s("99d9"),f=s("a523"),b=s("169a"),x=s("4bd4"),C=s("8654"),w=Object(d["a"])(c,a,i,!1,null,null,null);t["default"]=w.exports;m()(w,{VAlert:h["a"],VBtn:v["a"],VCard:g["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:p["c"],VContainer:f["a"],VDialog:b["a"],VForm:x["a"],VTextField:C["a"]})}}]);
//# sourceMappingURL=chunk-08202def.bef65418.js.map