(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3753eab5"],{"62ad":function(e,t,s){"use strict";s("4b85");var a=s("2b0e"),r=s("d9f7"),l=s("80d2");const o=["sm","md","lg","xl"],n=(()=>{return o.reduce((e,t)=>{return e[t]={type:[Boolean,String,Number],default:!1},e},{})})(),i=(()=>{return o.reduce((e,t)=>{return e["offset"+Object(l["C"])(t)]={type:[String,Number],default:null},e},{})})(),c=(()=>{return o.reduce((e,t)=>{return e["order"+Object(l["C"])(t)]={type:[String,Number],default:null},e},{})})(),u={col:Object.keys(n),offset:Object.keys(i),order:Object.keys(c)};function d(e,t,s){let a=e;if(null!=s&&!1!==s){if(t){const s=t.replace(e,"");a+=`-${s}`}return"col"!==e||""!==s&&!0!==s?(a+=`-${s}`,a.toLowerCase()):a.toLowerCase()}}const m=new Map;t["a"]=a["a"].extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...n,offset:{type:[String,Number],default:null},...i,order:{type:[String,Number],default:null},...c,alignSelf:{type:String,default:null,validator:e=>["auto","start","end","center","baseline","stretch"].includes(e)},tag:{type:String,default:"div"}},render(e,{props:t,data:s,children:a,parent:l}){let o="";for(const r in t)o+=String(t[r]);let n=m.get(o);if(!n){let e;for(e in n=[],u)u[e].forEach(s=>{const a=t[s],r=d(e,s,a);r&&n.push(r)});const s=n.some(e=>e.startsWith("col-"));n.push({col:!s||!t.cols,[`col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),m.set(o,n)}return e(t.tag,Object(r["a"])(s,{class:n}),a)}})},"66a4":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{scrollable:"",width:"70%"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({staticClass:"pink lighten-3 lighten-1 white--text text--lighten-1",attrs:{dark:"",fab:""}},a),[s("v-icon",[e._v("mdi-plus")])],1)]}}]),model:{value:e.dialogRegister,callback:function(t){e.dialogRegister=t},expression:"dialogRegister"}},[s("v-card",[s("v-card-title",[e._v("Registrar usuario")]),s("v-card-text",[s("v-form",{ref:"form"},[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",sm:"10",md:"5"}},[s("v-text-field",{attrs:{color:"blue",rules:e.codeRules,label:"Codigo*",required:""},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}})],1),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-select",{attrs:{items:["Admin","Usuario"],label:"Rol*",rules:[function(e){return!!e||"Se debe escojer un rol"}],required:"",color:"blue"},model:{value:e.user.role,callback:function(t){e.$set(e.user,"role",t)},expression:"user.role"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{attrs:{color:"blue",rules:[function(e){return!!e||"El nombre es necesario"}],label:"Nombre*",required:""},model:{value:e.user.firstName,callback:function(t){e.$set(e.user,"firstName",t)},expression:"user.firstName"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{attrs:{color:"blue",rules:[function(e){return!!e||"El apellido paterno es necesario"}],label:"Apellido paterno*"},model:{value:e.user.paternalLastName,callback:function(t){e.$set(e.user,"paternalLastName",t)},expression:"user.paternalLastName"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[s("v-text-field",{attrs:{color:"blue",rules:[function(e){return!!e||"El apellido materno es necesario"}],label:"Apellido materno*"},model:{value:e.user.maternalLastName,callback:function(t){e.$set(e.user,"maternalLastName",t)},expression:"user.maternalLastName"}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{color:"blue",rules:e.emailRules,label:"Correo*",required:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{valuePass:"myPass",label:"Contraseña",rules:e.passwordRules,"append-icon":e.valuePass?"mdi-eye":"mdi-eye-off",type:e.valuePass?"password":"text",color:"blue"},on:{"click:append":function(){return e.valuePass=!e.valuePass}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-select",{attrs:{items:["Cochabamba","La Paz","Santa Cruz"],label:"Ciudad*",rules:[function(e){return!!e||"Se debe escoger una ciudad"}],required:"",color:"blue","prepend-icon":"mdi-map-marker"},model:{value:e.user.city,callback:function(t){e.$set(e.user,"city",t)},expression:"user.city"}})],1),s("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[s("v-text-field",{attrs:{"prepend-icon":"mdi-cellphone",color:"blue",rules:e.phoneRules,label:"Celular/Telefono*"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),s("v-col",{attrs:{cols:"12",md:"12"}},[s("v-textarea",{attrs:{outlined:"",label:"Notas",color:"blue"},model:{value:e.user.notes,callback:function(t){e.$set(e.user,"notes",t)},expression:"user.notes"}})],1)],1)],1)],1)],1),s("v-card-actions",[s("v-alert",{attrs:{value:e.warningAlert,type:"warning"}},[e._v("\n        Algunos campos están vacios\n      ")]),s("v-alert",{attrs:{value:e.successAlert,type:"success"}},[e._v("\n        ¡Registrado!\n      ")]),s("div",{staticClass:"flex-grow-1"}),s("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"pink lighten-3",text:""},on:{click:function(t){return t.stopPropagation(),e.register(t)}}},[e._v("Registrar\n      ")]),s("v-btn",{staticClass:"mb-3 mr-3",attrs:{color:"pink lighten-3",text:""},on:{click:function(t){e.dialogRegister=!1,e.clearFields()}}},[e._v("Salir\n      ")])],1)],1)],1)},r=[],l=s("56d7"),o=s("bc3a"),n=s.n(o),i=s("f601"),c={data(){return{backendURL:"",dialogRegister:"",valuePass:String,warningAlert:!1,successAlert:!1,emailRules:[e=>!!e||"Correo es necesario",e=>/.+@.+\..+/.test(e)||"Correo debe ser valido"],phoneRules:[e=>!!e||"Número celular/Teléfono es necesario",e=>/^\d+$/.test(e)||"Nñumero debe ser valido"],codeRules:[e=>!!e||"Codigo es necesario",e=>/^\d+$/.test(e)||"Código debe ser valido"],passwordRules:[e=>!!e||"Contraseña es necesaria",e=>e.length>=5||"Contraseña debe ser más de 5 caracteres"],user:{code:"",role:"",firstName:"",paternalLastName:"",maternalLastName:"",email:"",password:"",city:"",phone:"",notes:"",lastLogIn:"now"}}},mounted:function(){this.backendURL=i["b"]},methods:{sendMailNotification(){const e=`\n        <p>¡Hola ${this.user.firstName}!</p>\n        <p>Tu nueva cuenta ha sido creada.</p>\n        <h3>¡Ingresa ahora!</h3>\n        <p>Entra al siguiente enlace ${this.backendURL} e inicia sesión. </p>\n      `;let t={from:"<UPBgestiondecalidad@gmail.com>",to:this.user.email,subject:"UPB Gestión de calidad: Nuevo usuario",text:"",html:e},s={headers:{"x-access-token":this.$store.state.token}};n.a.post(i["b"]+"/api/mail/send",t,s).then(e=>{console.log(e)}).catch(e=>{console.log(e)})},sendNotification(){let e={email:this.user.email,type:"Success",message:"Bienvenido a tu nueva cuenta, "+this.user.firstName+"!"},t={headers:{"x-access-token":this.$store.state.token}};n.a.post(i["b"]+"/api/notifications/add",e,t).then(e=>{console.log(e)}).catch(e=>{console.log(e)})},registerUserAPI(){let e={code:this.user.code,password:this.user.password,firstNames:this.user.firstName,paternalLastName:this.user.paternalLastName,maternalLastName:this.user.maternalLastName,email:this.user.email,city:this.user.city,phone:this.user.phone,notes:this.user.notes,role:this.user.role,lastLogIn:this.user.lastLogIn};n.a.post(i["b"]+"/api/users/signup",e).then(e=>{console.log(e),l["EventBus"].$emit("refreshTable","getUsers")}).catch(e=>{console.log(e)})},register(){this.$refs.form.validate()?(this.registerUserAPI(),this.sendMailNotification(),this.sendNotification(),this.clearFields(),this.successAlert=!0,setTimeout(()=>{this.successAlert=!1},1e4)):(this.warningAlert=!0,setTimeout(()=>{this.warningAlert=!1},1e4))},clearFields(){this.user.code="",this.user.role="",this.user.firstName="",this.user.paternalLastName="",this.user.maternalLastName="",this.user.email="",this.user.password="",this.user.city="",this.user.phone="",this.user.notes="",this.$refs.form.resetValidation()}}},u=c,d=s("2877"),m=s("6544"),p=s.n(m),f=s("0798"),h=s("8336"),b=s("b0af"),v=s("99d9"),g=s("62ad"),N=s("a523"),x=s("169a"),k=s("4bd4"),w=s("132d"),C=s("0fd9"),y=s("b974"),$=s("8654"),L=s("a844"),R=Object(d["a"])(u,a,r,!1,null,null,null);t["default"]=R.exports;p()(R,{VAlert:f["a"],VBtn:h["a"],VCard:b["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VCol:g["a"],VContainer:N["a"],VDialog:x["a"],VForm:k["a"],VIcon:w["a"],VRow:C["a"],VSelect:y["a"],VTextField:$["a"],VTextarea:L["a"]})}}]);
//# sourceMappingURL=chunk-3753eab5.4410ca86.js.map