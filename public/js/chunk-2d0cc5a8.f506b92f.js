(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cc5a8"],{"4e23":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{staticClass:"pt-5 mb-5 white--text",attrs:{color:"light-blue darken-4"}},[a("h4",{staticClass:"text-center pb-5"},[e._v("CORRECCIÓN INMEDIATA")])]),a("v-row",[e._l(e.correctionHeaders,(function(t,r){return a("v-col",{key:r},[a("h4",[e._v(e._s(t))])])})),a("div",{staticClass:"mr-5 mt-3"},[a("b",[e._v("Opciones")])])],2),e._l(e.correctionsData,(function(t,r){return a("v-row",{key:r},[a("v-col",[a("v-textarea",{staticClass:"mt-3",attrs:{"auto-grow":"",rows:"1",color:"blue darken-3",label:"Actividad",outlined:"","single-line":"",readonly:!e.isAdminOrGeneralResponsable()},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"activity.name"}})],1),a("v-col",[a("v-col",[a("v-combobox",{attrs:{color:"blue darken-3","item-color":"blue",items:e.items,label:"Responsable",autocomplete:!1,dense:"",readonly:!e.isAdminOrGeneralResponsable()},model:{value:t.responsable,callback:function(a){e.$set(t,"responsable",a)},expression:"activity.responsable"}})],1)],1),a("v-col",[a("v-textarea",{staticClass:"mt-3",attrs:{"auto-grow":"",rows:"1",color:"blue darken-3",label:"Descripcion",outlined:"","single-line":"",readonly:!e.verifyAuthorizedUser(t.responsable)},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"activity.description"}})],1),a("v-col",[a("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(r){var s=r.on;return[a("v-text-field",e._g({attrs:{placeholder:"YY/mm/dd","prepend-icon":"mdi-calendar",autocomplete:!1},model:{value:t.proposedDate,callback:function(a){e.$set(t,"proposedDate",a)},expression:"activity.proposedDate"}},s))]}}],null,!0)},[a("v-date-picker",{attrs:{color:"light-blue darken-4",locale:"es-419",min:"2017/01","no-title":"",disabled:!e.verifyAuthorizedUser(t.responsable),autocomplete:!1},model:{value:t.proposedDate,callback:function(a){e.$set(t,"proposedDate",a)},expression:"activity.proposedDate"}})],1)],1),a("v-col",[a("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(r){var s=r.on;return[a("v-text-field",e._g({attrs:{placeholder:"YY/mm/dd","prepend-icon":"mdi-calendar",autocomplete:!1},model:{value:t.realDate,callback:function(a){e.$set(t,"realDate",a)},expression:"activity.realDate"}},s))]}}],null,!0)},[a("v-date-picker",{attrs:{color:"light-blue darken-4",locale:"es-419",autocomplete:!1,min:"2017/01","no-title":"",disabled:!e.verifyAuthorizedUser(t.responsable)},model:{value:t.realDate,callback:function(a){e.$set(t,"realDate",a)},expression:"activity.realDate"}})],1)],1),e.verifyLastRow(r,e.correctionsData.length)?a("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{fab:"",small:"",color:"light-blue darken-2",disabled:!e.isAdminOrGeneralResponsable()},on:{click:e.addCorrection}},[a("v-icon",{attrs:{dark:""}},[e._v("mdi-plus")])],1):a("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{fab:"",small:"",color:"light-blue darken-2",disabled:!e.isAdminOrGeneralResponsable()},on:{click:function(t){return e.removeCorrection(r)}}},[a("v-icon",{attrs:{dark:""}},[e._v("mdi-minus")])],1),a("v-btn",{staticClass:"mt-4 mr-2 white--text",attrs:{disabled:!e.verifyAuthorizedUser(t.responsable),color:"light-blue darken-2",fab:"",small:""},on:{click:function(a){return e.getAttachmentRoute(t)}}},[a("v-icon",{attrs:{dark:""}},[e._v("mdi-paperclip")])],1)],1)}))],2)},s=[],o=a("d3b8"),i=a("bc3a"),n=a.n(i),l=a("f601"),c=a("b1b8"),d=a("bade"),u={props:{correctionsData:{type:Array,default:function(){return[]}},actualUser:{type:Object,default:function(){return{}}},responsible:{type:Array,default:function(){return[]}}},data(){return{correctionHeaders:["Actividad","Responsable","Descripción","Fecha propuesta","Fecha real"],verifyLastRow:o["a"],users:[],items:[],attachmentRoute:"",actionPlanID:""}},mounted(){this.getUsers(),this.checkCorrectionsData(),this.actionPlanID=this.$route.query.id},methods:{addCorrection(){let e={id:Object(c["a"])(),name:"",responsable:"",description:"",proposedDate:"",realDate:"",eventCreated:!1};this.correctionsData.push(e)},removeCorrection(e){this.correctionsData.splice(e,1)},getUsers(){let e={headers:{"x-access-token":this.$store.state.token}};n.a.get(l["b"]+"/api/users",e).then(e=>{this.users=e.data,this.formatUsers()}).catch(e=>{console.log(e)})},formatUsers(){this.users.forEach(e=>{let t=this.getNameWithFormat(e.firstNames,e.paternalLastName,e.maternalLastName);this.items.push({text:t,value:e._id})})},getNameWithFormat(e,t,a){return e+" "+t+" "+a},checkCorrectionsData(){this.correctionsData.length<1&&this.addCorrection()},isAdminOrGeneralResponsable(){return Object(d["a"])(this.actualUser)||Object(d["b"])(this.responsible,this.actualUser)},verifyAuthorizedUser(e){return this.isAdminOrGeneralResponsable()||e.value===this.actualUser._id},getAttachmentRoute(e){Object(c["b"])(e)?(this.attachmentRoute="/attachments?userID="+this.actualUser.value+"&actionPlanID="+this.actionPlanID+"&activityID="+e.id,this.$emit("save-action-plan"),this.$router.push(this.attachmentRoute)):this.attachmentRoute=""},createEvent(){console.log("llegue")}}},p=u,m=a("2877"),b=a("6544"),h=a.n(b),v=a("8336"),f=a("b0af"),k=a("62ad"),D=a("2b5d"),y=a("a523"),x=a("2e4b"),g=a("132d"),w=a("e449"),C=a("0fd9"),A=a("8654"),R=a("a844"),_=Object(m["a"])(p,r,s,!1,null,null,null);t["default"]=_.exports;h()(_,{VBtn:v["a"],VCard:f["a"],VCol:k["a"],VCombobox:D["a"],VContainer:y["a"],VDatePicker:x["a"],VIcon:g["a"],VMenu:w["a"],VRow:C["a"],VTextField:A["a"],VTextarea:R["a"]})}}]);
//# sourceMappingURL=chunk-2d0cc5a8.f506b92f.js.map